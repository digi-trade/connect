


<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
        <meta
            name="description"
            content="Documentation for the Cabital Connect API"
        >
    <title>Cabital Connect API Document</title>

    <style media="screen">
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cpf {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s, .highlight .sa, .highlight .dl {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf, .highlight .fm {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv, .highlight .vm {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .nl {
  color: #f92672;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <style media="print">
      * {
        -webkit-transition:none!important;
        transition:none!important;
      }
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #586e75;
}
.highlight .err {
  color: #002b36;
  background-color: #dc322f;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cm, .highlight .cpf, .highlight .c1, .highlight .cs {
  color: #657b83;
}
.highlight .cp {
  color: #b58900;
}
.highlight .nt {
  color: #b58900;
}
.highlight .o, .highlight .ow {
  color: #93a1a1;
}
.highlight .p, .highlight .pi {
  color: #93a1a1;
}
.highlight .gi {
  color: #859900;
}
.highlight .gd {
  color: #dc322f;
}
.highlight .gh {
  color: #268bd2;
  background-color: #002b36;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #6c71c4;
}
.highlight .kc {
  color: #cb4b16;
}
.highlight .kt {
  color: #cb4b16;
}
.highlight .kd {
  color: #cb4b16;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .dl, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #859900;
}
.highlight .sa {
  color: #6c71c4;
}
.highlight .sr {
  color: #2aa198;
}
.highlight .si {
  color: #d33682;
}
.highlight .se {
  color: #d33682;
}
.highlight .nn {
  color: #b58900;
}
.highlight .nc {
  color: #b58900;
}
.highlight .no {
  color: #b58900;
}
.highlight .na {
  color: #268bd2;
}
.highlight .m, .highlight .mb, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mx {
  color: #859900;
}
.highlight .ss {
  color: #859900;
}
    </style>
    <link href="../../stylesheets/screen-c9d8fa83.css" rel="stylesheet" media="screen" />
    <link href="../../stylesheets/print-953e3353.css" rel="stylesheet" media="print" />
      <script src="../../javascripts/all-b12a2749.js"></script>

    <script>
      $(function() { setupCodeCopy(); });
    </script>
  </head>

  <body class="en en_en en_en_index" data-languages="[&quot;shell&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="../../images/navbar-cad8cdcb.png" alt="" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="../../images/logo-c460f495.svg" class="logo" alt="" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">shell</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
          </li>
          <li>
            <a href="#authentication" class="toc-h1 toc-link" data-title="Authentication">Authentication</a>
          </li>
          <li>
            <a href="#partner-level-setting" class="toc-h1 toc-link" data-title="Partner Level Setting">Partner Level Setting</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#partner-configuration" class="toc-h2 toc-link" data-title="Partner configuration">Partner configuration</a>
                  </li>
                  <li>
                    <a href="#get-the-latest-quotation-get" class="toc-h2 toc-link" data-title="Get the latest quotation (GET)">Get the latest quotation (GET)</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#account-connect-related" class="toc-h1 toc-link" data-title="Account Connect related">Account Connect related</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#get-user-connection-status" class="toc-h2 toc-link" data-title="Get user connection status">Get user connection status</a>
                  </li>
                  <li>
                    <a href="#name-match" class="toc-h2 toc-link" data-title="Name Match">Name Match</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#account-operation-related" class="toc-h1 toc-link" data-title="Account operation related">Account operation related</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#list-of-account-available-balances" class="toc-h2 toc-link" data-title="List of account available balances">List of account available balances</a>
                  </li>
                  <li>
                    <a href="#account-available-balance-in-single-currency" class="toc-h2 toc-link" data-title="Account available balance in single currency">Account available balance in single currency</a>
                  </li>
                  <li>
                    <a href="#36832df916" class="toc-h2 toc-link" data-title="账户单币入账信息">账户单币入账信息</a>
                  </li>
                  <li>
                    <a href="#currency-conversion" class="toc-h2 toc-link" data-title="Currency conversion">Currency conversion</a>
                  </li>
                  <li>
                    <a href="#account-transfer-history" class="toc-h2 toc-link" data-title="Account transfer history">Account transfer history</a>
                  </li>
                  <li>
                    <a href="#account-transfer-details" class="toc-h2 toc-link" data-title="Account transfer details">Account transfer details</a>
                  </li>
                  <li>
                    <a href="#two-way-account-transfer" class="toc-h2 toc-link" data-title="Two-way account transfer">Two-way account transfer</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#callback-event" class="toc-h1 toc-link" data-title="Callback event">Callback event</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#account-connect-status-event" class="toc-h2 toc-link" data-title="Account Connect status event">Account Connect status event</a>
                  </li>
                  <li>
                    <a href="#event-signature" class="toc-h2 toc-link" data-title="Event signature">Event signature</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#error-handling-code" class="toc-h1 toc-link" data-title="Error Handling Code">Error Handling Code</a>
          </li>
          <li>
            <a href="#version-changes" class="toc-h1 toc-link" data-title="Version changes">Version changes</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#0-2-0" class="toc-h2 toc-link" data-title="0.2.0">0.2.0</a>
                  </li>
                  <li>
                    <a href="#0-1-1" class="toc-h2 toc-link" data-title="0.1.1">0.1.1</a>
                  </li>
                  <li>
                    <a href="#0-1-0" class="toc-h2 toc-link" data-title="0.1.0">0.1.0</a>
                  </li>
              </ul>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href='mailto:developer@cabital.com'>Sign Up for Partner Key</a></li>
            <li><a href='https://cabital.com/'>Copyright by Cabital 2021</a></li>
            <li><a href='/connect/'>中文</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p>By leveraging Cabital Connect API, you could builds the connection with crypto wallets, which enable credit and debits between partner and Cabital.</p>

<p>Cabitlities：</p>

<ul>
<li>It provides erver side Authentication &amp; Authorization.</li>
<li>Through name matching interfaces, estiabilish Cabital Connect between two parties&#39; crypto wallet.</li>
<li>Query Cabital wallet balance, transfer balance into same beneficia&#39;s wallet. Also, provides Convert interface, to coverert currencies on behavior of user, and attach to transfer order.</li>
</ul>
<h1 id='authentication'>Authentication</h1>
<p>API Key / Secret is the credential to access Connect API. All the HTTPS calls need to be signed and include following HTTP Headers:</p>

<ul>
<li>ACCESS-KEY Customer Access Key, provided by Cabital</li>
<li>ACCESS-SIGN The signature build by the algorithm described below. </li>
<li>ACCESS-TIMESTAMP API Access time stamp</li>
<li>ACCESS-NONCE We use nonces to ensure that old communications cannot be reused, each API call must used different nounce, otherwise, system will ignore the 2nd request arrived within 60 mins time frame.</li>
</ul>

<p>API Request must include <code>Content-Type</code> as <code>application/json</code>, the body must be in restricted JSON format.</p>

<p>ACCESS-SIGN Header is the sha256 HMAC hash by <code>time stamp + HTTP method + NONCE + access path + request body</code> with Secret Key.</p>

<p>-The timestamp should be the same as ACCESS-TIMESTAMP
-The request body is in the form of String, or regarded as empty, especially when accessing the API through GET
-HTTP method must be uppercase</p>

<p>ACCESS-TIMESTAMP is from the Unix Epoch to the current number in seconds. The timestamp of the customer request must be within 30 seconds of the API service time, otherwise it will be considered expired or rejected directly.</p>

<aside class="warning">
Please do not share your Secret, otherwise it will cause information leakage and unnecessary loss of transaction fees. If Secret is leaked, please contact your service consultant and update immediately.</aside>
<h1 id='partner-level-setting'>Partner Level Setting</h1>
<p>The partner system API is provided to the partner to perceive the status of cooperative account opening, system basic settings, and non-user level settings.</p>
<h2 id='partner-configuration'>Partner configuration</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"http://partner.cabital.com/partners/partner_id/config"</span>
</code></pre></div><h3 id='http-request'>HTTP Request</h3>
<p><code>GET /api/v1/config</code></p>

<blockquote>
<p>Response Sample:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"currencies"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"symobl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
            </span><span class="nl">"deposit_methods"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"ERC20"</span><span class="p">,</span><span class="w"> </span><span class="s2">"SOL"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="nl">"withdrew_methods"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"ERC20"</span><span class="p">,</span><span class="w"> </span><span class="s2">"SOL"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="nl">"config"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"debit"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"min"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.01"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"max"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"credit"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"allow"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"min"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.01"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"max"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"conversion"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"allow"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"min"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.01"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"max"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5"</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"symobl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EUR"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> 
            </span><span class="nl">"deposit_methods"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"SEPA"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="nl">"withdrew_methods"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"SEPA"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="p">,</span><span class="w">
            </span><span class="nl">"config"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"debit"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"allow"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"credit"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"allow"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"conversion"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"allow"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"min"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.01"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"max"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5"</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='request-object'>Request Object</h3>
<p>symobl | string(ENUM) | currency symbol
type | int(ENUM) | currency type, see the explanation below for details
deposit_methods | list | Current deposit methods
withdraw_methods | list | Current withdrawal method
config | list(object) | restrictions and configuration of the currency</p>

<p>Config object definition</p>

<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>allow</td>
<td>bool</td>
<td>availability of the currency (killer switch)</td>
</tr>
<tr>
<td>min</td>
<td>string(number)</td>
<td>minimum per transaction</td>
</tr>
<tr>
<td>max</td>
<td>string(number)</td>
<td>Maximum per transaction</td>
</tr>
</tbody></table>
<h3 id='enum'>Enum</h3>
<ul>
<li>Currency type</li>
</ul>

<table><thead>
<tr>
<th>Value</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>FIAT</td>
</tr>
<tr>
<td>2</td>
<td>Crypto Currency</td>
</tr>
</tbody></table>

<aside class="success">
The limit is for the entire partner, limit of a single transaction
</aside>
<h2 id='get-the-latest-quotation-get'>Get the latest quotation (GET)</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"http://partner.cabital.com/partners/partner_id/quotes/USDT-EUR"</span>
</code></pre></div><h3 id='http-request-2'>HTTP Request</h3>
<p><code>GET /api/v1/quotes/&lt;code_pair&gt;</code></p>
<h3 id='url-parameters'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>code_pair</td>
<td>true</td>
<td>The CODE Pair of the quote uses <code>-</code> as the separator. The Cabital system will ignore the incoming order and sort according to its own rules. Therefore, a currency pair will always return one regardless of the incoming order and the buying and selling relationship. A quotation, such as USDT-EUR.</td>
</tr>
</tbody></table>

<blockquote>
<p>Response Sample</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"ask"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.864962"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"valid_until"</span><span class="p">:</span><span class="w"> </span><span class="mi">1633426832</span><span class="p">,</span><span class="w">
    </span><span class="nl">"quote_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20211005094027:USDT-EUR:Customer"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"valid_interval"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
    </span><span class="nl">"bid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.16424"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='response-object'>Response Object</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>ask</td>
<td>string(number)</td>
<td>Sell CODE1 in exchange for CODE2 offer</td>
</tr>
<tr>
<td>valid_until</td>
<td>number(timestamp)</td>
<td>The number in seconds from the Unix Epoch to the current, used to indicate the effective time of the quote</td>
</tr>
<tr>
<td>quote_id</td>
<td>string</td>
<td>The unique ID of the quotation, the format is event stamp: quotation currency pair: quotation purpose</td>
</tr>
<tr>
<td>quote</td>
<td>string</td>
<td>The quoted Pair, the left is Base, the right is Quote, and the quote is centered on Cabital</td>
</tr>
<tr>
<td>valid_interval</td>
<td>number</td>
<td>The effective time width of the quotation, in seconds</td>
</tr>
<tr>
<td>bid</td>
<td>string(number)</td>
<td>Sell CODE2 in exchange for CODE1&#39;s quotation</td>
</tr>
</tbody></table>

<aside class="success">
The symbol of FIAT is based on <a href="https://en.wikipedia.org/wiki/ISO_4217">ISO-4217</a>, and the crypto currency is based on <a href="https://coinmarketcap.com/ all/views/all/">CoinMarketCap</a> list
</aside>
<h1 id='account-connect-related'>Account Connect related</h1>
<p>Cabital Connect is subject to regulatory requirements. The access partner must provide the identity information (each field) consistent with this party. For field descriptions, please refer to the API for linking accounts with the same name.</p>
<h2 id='get-user-connection-status'>Get user connection status</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"http://partner.cabital.com/partners/partner_id/accounts/cdaa9983-9b8f-4478-ba60-896ac239879d/detail"</span>
</code></pre></div><h3 id='http-request'>HTTP Request</h3>
<p><code>GET /api/v1/accounts/&lt;account_id&gt;/detail</code></p>
<h3 id='url-parameters'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>account_id</td>
<td>true</td>
<td>Cabital Connect Account Id</td>
</tr>
</tbody></table>

<blockquote>
<p>Response Sample:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"match_status"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"MATCHED"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"otp_ready"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"email_address"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"john.doe@email.com"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"kyc_token"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"8yzhvhv87dahfb"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"limits"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>account_status</td>
<td>string(ENUM)</td>
<td>Stratus, see the definition in Events</td>
</tr>
<tr>
<td>otp_ready</td>
<td>bool</td>
<td>Whether the customer has completed the OTP binding in Cabital, it needs to be attached when withdrawing.</td>
</tr>
<tr>
<td>email_address?</td>
<td>string</td>
<td>The user’s Email for the partner to match</td>
</tr>
<tr>
<td>kyc_token</td>
<td>string</td>
<td>The user&#39;s KYC Token for the partner to apply</td>
</tr>
<tr>
<td>limits</td>
<td>object</td>
<td>Current payment limit</td>
</tr>
</tbody></table>

<aside class="success">
Single account limit
</aside>
<h2 id='name-match'>Name Match</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"/api/v1/accounts/cdaa9983-9b8f-4478-ba60-896ac239879d/match"</span> <span class="se">\</span>
  <span class="nt">-X</span> <span class="s2">"PUT"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{ "name": "John Doe", "id": "J12345678D", "id_document": "PASSPORT", "dob": "19700101" }'</span> 
</code></pre></div><h3 id='http-request-2'>HTTP Request</h3>
<p><code>PUT /api/v1/accounts/&lt;account_id&gt;/match</code></p>
<h3 id='url-parameters-2'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>account_id</td>
<td>true</td>
<td>Cabital Connect Account Id</td>
</tr>
</tbody></table>
<h3 id='request-body'>Request Body</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>string</td>
<td>The full name of the customer, in accordance with the usual order on the document, such as First Name + (Middle Name) + Last Name</td>
</tr>
<tr>
<td>id</td>
<td>string</td>
<td>ID on the identity document</td>
</tr>
<tr>
<td>id_document</td>
<td>string(ENUM)</td>
<td>Identity document type, could be one of <code>ID,PASSPORT,DRIVER_LICENSE</code></td>
</tr>
<tr>
<td>issued_by</td>
<td>string</td>
<td>The country where the identity document was issued</td>
</tr>
<tr>
<td>dob</td>
<td>string</td>
<td>Date of birth format in <code>YYYYMMDD</code></td>
</tr>
</tbody></table>

<blockquote>
<p>Sample Response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MISMATCH"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"mismatch_fields"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"dob"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Submit user information to get the verification result of the same name control.</p>
<h3 id='c1f957ec0c'>错误消息</h3>
<ul>
<li>400 Connection Status must be in CREATED or MISMATCHED</li>
</ul>
<h1 id='account-operation-related'>Account operation related</h1>
<p>List of Account Operation Business Errors</p>

<table><thead>
<tr>
<th>Error</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>PA001</td>
<td>Cabital account id does not exist</td>
</tr>
<tr>
<td>PA002</td>
<td>Insufficient account available balance</td>
</tr>
<tr>
<td>PA003</td>
<td>The transaction has not reached the minimum limit</td>
</tr>
<tr>
<td>PA004</td>
<td>The transaction exceeds the maximum limit</td>
</tr>
<tr>
<td>PA005</td>
<td>The requested transaction type is not available</td>
</tr>
<tr>
<td>PA006</td>
<td>The currency of the requested transaction request is not available</td>
</tr>
<tr>
<td>PA007</td>
<td>Quote has been expired</td>
</tr>
<tr>
<td>PA008</td>
<td>Incorrect 2FA (OTP)</td>
</tr>
<tr>
<td>PA009</td>
<td>The customer’s KYC status has not yet been matched</td>
</tr>
<tr>
<td>PA010</td>
<td>2FA (OTP) is not set properly</td>
</tr>
<tr>
<td>PA011</td>
<td>Convert&#39;s Quote usage is incorrect (Invalid Calculation)</td>
</tr>
</tbody></table>

<!-- ## 获取用户提现限额


```shell
curl "http://partner.cabital.com/api/v1/limit" \
  -H "Authorization: Bearer"
```

### HTTP 请求

`GET /api/v1/limit`


> Response Sample:

```json
[
  {
    "id": 1,
    "name": "Fluffums",
    "breed": "calico",
    "fluffiness": 6,
    "cuteness": 7
  },
  {
    "id": 2,
    "name": "Max",
    "breed": "unknown",
    "fluffiness": 5,
    "cuteness": 10
  }
]
```
<aside class="success">
用户级别的限额
</aside>

获取该账户的提款限额（根据账户的AML规则）



> Response Sample:

```json
[
  {
    "code": "BTC",
    "balances": "1",
    "allow_debit": true,
    "allow_credit": true
  },
  {
    "code": "ETH",
    "balances": "1",
    "allow_debit": true,
    "allow_credit": true
  },
  {
    "code": "USDT",
    "balances": "1",
    "allow_debit": true,
    "allow_credit": true
  },
  {
    "code": "EUR",
    "balances": "1",
    "allow_debit": false,
    "allow_credit": false
  },
  {
    "code": "GBP",
    "balances": "1.0",
    "allow_debit": false,
    "allow_credit": false
  }
]
```

获取用户的所有账户余额

### HTTP Request

`GET /api/v1/accounts/<account_id>/balances`

### URL Parameters

Parameter | Default | Description
--------- | ------- | -----------
account_id | true | Cabital Connect Account Id -->
<h2 id='list-of-account-available-balances'>List of account available balances</h2>
<p>Get all account balances of the user</p>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"/api/v1/accounts/{account_id}/balances"</span>
</code></pre></div>
<blockquote>
<p>Response Sample:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"balances"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.12345678"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"balances"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.000000000"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"balances"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1200.000000"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EUR"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"balances"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.00"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GBP"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"balances"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.00"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div><h3 id='http-request'>HTTP Request</h3>
<p><code>GET /api/v1/accounts/&lt;account_id&gt;/balances</code></p>
<h3 id='url-parameters'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>account_id</td>
<td>true</td>
<td>Cabital Connect Account Id</td>
</tr>
</tbody></table>
<h2 id='account-available-balance-in-single-currency'>Account available balance in single currency</h2>
<p>Get the user&#39;s single account balance, please refer to the currency symbol <a href="/?shell#get">报价API</a></p>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"/api/v1/accounts/6d92e7b4-715c-4ce3-a028-19f1c8c9fa6c/balances/BTC"</span>
</code></pre></div>
<blockquote>
<p>Response Sample:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"balances"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.12345678"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='http-request-2'>HTTP Request</h3>
<p><code>GET /api/v1/accounts/&lt;account_id&gt;/balances/&lt;symbol&gt;</code></p>
<h3 id='url-parameters-2'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>account_id</td>
<td>true</td>
<td>Cabital Connect Account Id</td>
</tr>
<tr>
<td>symbol</td>
<td>true</td>
<td>货币的Symbol</td>
</tr>
</tbody></table>
<h2 id='36832df916'>账户单币入账信息</h2>
<p>获取用户的单一账户入账信息</p>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"/api/v1/accounts/6d92e7b4-715c-4ce3-a028-19f1c8c9fa6c/balances/EUR/deposit/SEPA"</span>
</code></pre></div>
<blockquote>
<p>Response Sample:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SEPA"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"account_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cabital Fintech (LT) UAB"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"iban"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LT493780000074448705"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"ref_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"N6FH7B"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"bic"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TRYULT21XXX"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"bank_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Transactive Systems UAB"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"bank_address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Verkių g. 25C-1, Vilnius"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"bank_country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Lithuania"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='http-request-3'>HTTP Request</h3>
<p><code>GET /api/v1/accounts/&lt;account_id&gt;/balances/&lt;symbol&gt;/deposit/&lt;method&gt;</code></p>
<h3 id='url-parameters-3'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>account_id</td>
<td>true</td>
<td>Cabital Connect Account Id</td>
</tr>
<tr>
<td>symbol</td>
<td>true</td>
<td>Currency symbol</td>
</tr>
<tr>
<td>method</td>
<td>false</td>
<td>The method of depositing currency is not required. If missing, the default method will be used. Please refer to the specific method<a href="/?shell#79fee25901">配置API</a></td>
</tr>
</tbody></table>
<h2 id='currency-conversion'>Currency conversion</h2>
<p>Through the method of conversion between Cabital&#39;s account balances, exchange different currencies. By converting currencies, you can trade currencies that Cabital does not support transfer by converting first and then transferring (C+T)</p>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="s2">"/api/v1/accounts/6d92e7b4-715c-4ce3-a028-19f1c8c9fa6c/conversions"</span>
<span class="nt">-d</span> <span class="s1">'{
    "quote_id": "20210416225049:BTC-USDT:Customer",
    "quote": "61426.365",
    "pair": "BTC-USDT",
    "buy_amount": "0.001",
    "sell_amount": "61.426365",
    "major_ccy": "BTC"
}'</span>
</code></pre></div>
<blockquote>
<p>Request Sample:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"quote_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20210416225049:BTC-USDT:Customer"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"quote"</span><span class="p">:</span><span class="w"> </span><span class="s2">"61426.365"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"pair"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-USDT"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"buy_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.001"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"sell_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"61.426365"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"major_ccy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Response Sample:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"transaction_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d81adf6d-0322-41d7-8c32-669203e35f11"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUCCESS"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='http-request-4'>HTTP Request</h3>
<p><code>POST /api/v1/accounts/&lt;account_id&gt;/conversions</code></p>
<h3 id='url-parameters-4'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>account_id</td>
<td>true</td>
<td>Cabital Connect Account Id</td>
</tr>
</tbody></table>
<h3 id='request-object'>Request Object</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>quote_id</td>
<td>string</td>
<td>The unique identifier of the quote</td>
</tr>
<tr>
<td>quote</td>
<td>string(number)</td>
<td>quote</td>
</tr>
<tr>
<td>pair</td>
<td>string</td>
<td>The currency pair quoted, the left side is buying, the right side is selling</td>
</tr>
<tr>
<td>buy_amount</td>
<td>string(number)</td>
<td>buy amount</td>
</tr>
<tr>
<td>sell_amount</td>
<td>string(number)</td>
<td>sell amount</td>
</tr>
<tr>
<td>major_ccy</td>
<td>string</td>
<td>Major currency, used to determine the conversion quota</td>
</tr>
</tbody></table>

<aside class="warning">
<b>Attention：</b>
<ul>
  <li>Be sure to pay attention to the direction of the pair, the left side is the buying currency, and the right side is the selling currency. </li>
  <li>Because the quotation supports Ask & Bid, no matter buying or selling, it is the same quotation pair. </li>
</ul>
</aside>
<h2 id='account-transfer-history'>Account transfer history</h2>
<p>Query transfer history records, support filter query and pagination.</p>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"/api/v1/accounts/6d92e7b4-715c-4ce3-a028-19f1c8c9fa6c/transfers"</span>
</code></pre></div>
<blockquote>
<p>Response Sample:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"pagination_response"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"cursor"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"transfers"</span><span class="p">:[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"transfer_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4c416854-8970-4838-99ad-febc437ac81d"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1000.365"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEBIT"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"conversion_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d81adf6d-0322-41d7-8c32-669203e35f11"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"external_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"adb8f31d-7a71-4003-85d7-3ac58158461f"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1633445162</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"transfer_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4c416854-8971-4838-99ad-febc437ac81d"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.365"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CREDIT"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"conversion_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d81adf6d-0322-41d7-8c32-669203e35f11"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"external_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"adb8f31d-7a71-4003-85d7-3ac58158461f"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1633445160</span><span class="w">
    </span><span class="p">},</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='http-request-5'>HTTP Request</h3>
<p><code>GET /api/v1/accounts/&lt;account_id&gt;/transfers</code></p>
<h3 id='url-parameters-5'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>account_id</td>
<td>true</td>
<td>--</td>
<td>Cabital Connect Account Id</td>
</tr>
<tr>
<td>direction</td>
<td>false</td>
<td>2 Ways</td>
<td>filter by direction <code>CREDIT</code> / <code>DEBIT</code></td>
</tr>
<tr>
<td>symbol</td>
<td>false</td>
<td>all currencies</td>
<td>filter for currencies</td>
</tr>
<tr>
<td>cursor</td>
<td>false</td>
<td>0</td>
<td>result set cursor</td>
</tr>
<tr>
<td>page_size</td>
<td>false</td>
<td>10</td>
<td>page size（1-30）</td>
</tr>
<tr>
<td>has_coversion</td>
<td>false</td>
<td>both</td>
<td>bool type, filter whether there are related conversion orders</td>
</tr>
<tr>
<td>created_from</td>
<td>false</td>
<td>0</td>
<td>Create order start time (Unix Time Epoch in seconds)</td>
</tr>
<tr>
<td>created_to</td>
<td>false</td>
<td>NOW</td>
<td>Create order end time (Unix Time Epoch in seconds)</td>
</tr>
</tbody></table>
<h3 id='response-object'>Response Object</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transfer_id</td>
<td>string(uuid)</td>
<td>Transfer order id</td>
</tr>
<tr>
<td>amount</td>
<td>string(number)</td>
<td>amount</td>
</tr>
<tr>
<td>symbol</td>
<td>string</td>
<td>currency symbol</td>
</tr>
<tr>
<td>direction</td>
<td>string(enum)</td>
<td>The direction of the transfer, with Cabital as the center, <code>CREDIT</code> for top up, and <code>DEBIT</code> for withdraw.</td>
</tr>
<tr>
<td>conversion_id</td>
<td>string(uuid)</td>
<td>The conversion order ID in C+T related transactions, optional</td>
</tr>
<tr>
<td>external_id</td>
<td>string(50)</td>
<td>The third-party ID of the partner</td>
</tr>
<tr>
<td>status</td>
<td>string(enum)</td>
<td>The result of the transfer, SUCCESS / FAILED</td>
</tr>
</tbody></table>
<h2 id='account-transfer-details'>Account transfer details</h2>
<p>Transfer detail</p>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"/api/v1/accounts/6d92e7b4-715c-4ce3-a028-19f1c8c9fa6c/transfers/4c416854-8970-4838-99ad-febc437ac81d"</span>
</code></pre></div>
<blockquote>
<p>Response Sample:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"transfer_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4c416854-8970-4838-99ad-febc437ac81d"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1000.365"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEBIT"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"conversion_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d81adf6d-0322-41d7-8c32-669203e35f11"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"external_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"adb8f31d-7a71-4003-85d7-3ac58158461f"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1633445162</span><span class="p">,</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUCCESS"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='http-request-6'>HTTP Request</h3>
<p><code>GET /api/v1/accounts/&lt;account_id&gt;/transfers/&lt;trasfer_id&gt;</code></p>
<h3 id='url-parameters-6'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>account_id</td>
<td>true</td>
<td>Cabital Connect Account Id</td>
</tr>
<tr>
<td>trasfer_id</td>
<td>true</td>
<td>Transfer order id</td>
</tr>
</tbody></table>
<h3 id='response-object-2'>Response Object</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transfer_id</td>
<td>string(uuid)</td>
<td>Transfer order id</td>
</tr>
<tr>
<td>amount</td>
<td>string(number)</td>
<td>amount</td>
</tr>
<tr>
<td>symbol</td>
<td>string</td>
<td>currency symbol</td>
</tr>
<tr>
<td>direction</td>
<td>string(enum)</td>
<td>The direction of the transfer, with Cabital as the center, <code>CREDIT</code> for top up, and <code>DEBIT</code> for withdraw.</td>
</tr>
<tr>
<td>conversion_id</td>
<td>string(uuid)</td>
<td>The conversion order ID in C+T related transactions, optional</td>
</tr>
<tr>
<td>external_id</td>
<td>string(50)</td>
<td>The third-party ID of the partner, not required</td>
</tr>
<tr>
<td>status</td>
<td>string(enum)</td>
<td>The result of the transfer, SUCCESS / FAILED</td>
</tr>
</tbody></table>
<h2 id='two-way-account-transfer'>Two-way account transfer</h2>
<p>Transfer between Cabital and the partner’s account under the same name.</p>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="s2">"/api/v1/accounts/6d92e7b4-715c-4ce3-a028-19f1c8c9fa6c/transfers"</span>
<span class="nt">-d</span> <span class="s1">'{
    "amount": "1000.365",
    "symbol": "USDT",
    "direction": "debit",
    "conversion_id": "d81adf6d-0322-41d7-8c32-669203e35f11",
    "external_id": "adb8f31d-7a71-4003-85d7-3ac58158461f"
}'</span>
</code></pre></div>
<blockquote>
<p>Request Sample:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1000.365"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"debit"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"conversion_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d81adf6d-0322-41d7-8c32-669203e35f11"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"external_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"adb8f31d-7a71-4003-85d7-3ac58158461f"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Response Sample:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"transfer_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4c416854-8970-4838-99ad-febc437ac81d"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUCCESS"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='http-request-7'>HTTP Request</h3>
<p><code>POST /api/v1/accounts/&lt;account_id&gt;/transfers</code></p>
<h3 id='url-parameters-7'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>account_id</td>
<td>true</td>
<td>Cabital Connect Account Id</td>
</tr>
</tbody></table>
<h3 id='request-object-2'>Request Object</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>amount</td>
<td>string(number)</td>
<td>amount</td>
</tr>
<tr>
<td>symbol</td>
<td>string</td>
<td>currency symbol</td>
</tr>
<tr>
<td>otp</td>
<td>string</td>
<td>OTP Number (6 digits from Google Authenticator)</td>
</tr>
<tr>
<td>direction</td>
<td>string(enum)</td>
<td>The direction of the transfer, with Cabital as the center, <code>CREDIT</code> for top up, and <code>DEBIT</code> for withdraw.</td>
</tr>
<tr>
<td>conversion_id</td>
<td>string(uuid)</td>
<td>The conversion order ID in C+T related transactions, optional</td>
</tr>
<tr>
<td>external_id</td>
<td>string(50)</td>
<td>The third-party ID of the partner, must be unique for one partner</td>
</tr>
</tbody></table>
<h3 id='response-object-3'>Response Object</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transfer_id</td>
<td>string(uuid)</td>
<td>transfer id</td>
</tr>
<tr>
<td>external_id</td>
<td>string(50)</td>
<td>The third-party ID of the partner, must be unique for one partner</td>
</tr>
<tr>
<td>status</td>
<td>string(enum)</td>
<td>The result of the transfer, SUCCESS / FAILED</td>
</tr>
</tbody></table>
<h1 id='callback-event'>Callback event</h1>
<p>Callback events are expected to arrive in 1-5 minutes on average, but in theory it may take up to 24 hours. If you miss the Callback event for some reason, don’t worry, we will resend the failed Callback event at any time. If the Callback event request fails, we will try to resend it four times: after 5 minutes, 1 hour, 5 hours, and 18 hours, until the request succeeds and obtains a 2XX return code.</p>

<p>We recommend that you wait no more than a day for the Callback event, and then send a request to our server to obtain status information about the resource.</p>
<h2 id='account-connect-status-event'>Account Connect status event</h2>
<p>When the user initiates a connection from the counterparty, the system will send an account association status event based on the current connection status, which includes the following states:</p>

<table><thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>INITIALIZED</td>
<td>The user is successfully registered and has not yet submitted KYC in Cabital</td>
</tr>
<tr>
<td>PENDING</td>
<td>Cabital processing user identification documents</td>
</tr>
<tr>
<td>TEMPORARY_REJECTED</td>
<td>The user is requested by Cabital to provide more materials</td>
</tr>
<tr>
<td>FINAL_REJECTED</td>
<td>The user was finally rejected by Cabital</td>
</tr>
<tr>
<td>CREATED</td>
<td>The user passed Cabital&#39;s KYC, and the Cabital account is opened, waiting for the partner to submit the same name verification.</td>
</tr>
<tr>
<td>MATCHING</td>
<td>The partner has been submitted, the same name verification is under manual review</td>
</tr>
<tr>
<td>MATCHED</td>
<td>Same name verification is passed, the same account transfer is fully availalbe</td>
</tr>
<tr>
<td>MISMATCHED</td>
<td>Same name verification rejection, multiple reasons</td>
</tr>
<tr>
<td>UNLINKED</td>
<td>The user / Cabital actively closes the connection with an account of the partner</td>
</tr>
</tbody></table>

<!-- READYFORMATCHING | 我方KYC通过，等待合作方提交同名验证 (以后）-->

<p>When the status of the account connection changes, we will send you a POST request with a JSON payload to the URL provided to us during integration.</p>
<h3 id='json-payload'>JSON Payload</h3>
<blockquote>
<p>JSON Payload</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"account_uuid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6d92e7b4-715c-4ce3-a028-19f1c8c9fa6c"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"user_email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jone.doe@email.com"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"user_ext_ref"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fce4fd45-7dd7-4d4c-b06c-e17ff12f3e30"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"staus"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INITIALIZED"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"event_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-07-01T09:00:00.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"data"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>account_uuid</td>
<td>string</td>
<td>true</td>
<td>This party&#39;s account Id</td>
</tr>
<tr>
<td>user_email</td>
<td>string</td>
<td>true</td>
<td>The user email of the account</td>
</tr>
<tr>
<td>user_ext_ref</td>
<td>string</td>
<td>true</td>
<td>External Id entered by the partner</td>
</tr>
<tr>
<td>staus</td>
<td>string(enum)</td>
<td>true</td>
<td>status of account association</td>
</tr>
<tr>
<td>staus</td>
<td>datestamp</td>
<td>true</td>
<td>The time when the event occurred, in the format <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601</a></td>
</tr>
<tr>
<td>data</td>
<td>object</td>
<td>false</td>
<td>Some additional data associated with the account, such as Shared Token</td>
</tr>
</tbody></table>

<!-- ## Transfer事件

当对手方发起划转后，系统会根据现在的划转状态发送 Transfer事件 事件，其包含以下几个状态：

- SUCCESS
- FAILED

<aside class="notice">
通常不需要监听 Transfer 事件，因为Transfer结果是同期返回给对手方的。
</aside>
### 事件内容 JSON Payload

> JSON Payload
 
```json
{
    "transfer_id": "4c416854-8970-4838-99ad-febc437ac81d",
    "amount": "1000.365",
    "symbol": "USDT",
    "direction": "DEBIT",
    "conversion_id": "d81adf6d-0322-41d7-8c32-669203e35f11",
    "external_id": "adb8f31d-7a71-4003-85d7-3ac58158461f",
    "created_at": 1633445162,
    "status": "SUCCESS"
}
```

Field | Type | Description
--------- | ------- | -----------
transfer_id | string(uuid) | 划转订单ID
amount | string(number) | 数量
symbol | string | 划转的货币
direction | string(enum) | 划转的方向，以Cabital为中心，`CREDIT`为充值，`DEBIT`为提款
conversion_id | string(uuid) | C+T关联交易中的转换订单ID，非必须
external_id | string(50) | 合作方的第三方ID，非必需
status | string(enum) | 划转的结果，SUCCESS / FAILED -->
<h2 id='event-signature'>Event signature</h2>
<p>Webhook signature rules are consistent with API authentication, please refer to <a href="#api">API authentication</a></p>
<h1 id='error-handling-code'>Error Handling Code</h1>
<p>System error handling</p>

<table><thead>
<tr>
<th>Error code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request - There is an error in parameters</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized - API Secret error, or Request signature error.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden - Usually the customer has canceled the association with the partner&#39;s account, and the partner needs to initiate a re-association. (Unlink status)</td>
</tr>
<tr>
<td>404</td>
<td>Not Found - The specific resource does not exist</td>
</tr>
<tr>
<td>405</td>
<td>Method Not Allowed - The method of access is incorrect</td>
</tr>
<tr>
<td>406</td>
<td>Not Acceptable - The mandatory format is JSON, not allowed</td>
</tr>
<tr>
<td>409</td>
<td>Conflict - The message violates idempotence (NONCE)</td>
</tr>
<tr>
<td>429</td>
<td>Too Many Requests - Too many requests</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error - A server error occurred on this party, please try again.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable - Our service is unavailable, please try again later.</td>
</tr>
</tbody></table>
<h1 id='version-changes'>Version changes</h1><h2 id='0-2-0'>0.2.0</h2>
<ul>
<li>Standardized the product name, changed from <code>partner</code> to <code>cabital connect</code></li>
<li>Added partner preparation documents to prepare for the partner&#39;s access to its own system</li>
<li>Minor adjustments in the naming of the Connect status, which refines the two different properties of <code>Rejected</code></li>
<li>Added error handling of the account, adjusted the status, and converted it to config</li>
</ul>
<h2 id='0-1-1'>0.1.1</h2>
<ul>
<li>API-Key has been restored to speed up the integration of Connect for partners who have integrated CaaS</li>
<li>Due to the use of API-Key, remove the Partner Id in the access Path</li>
<li>Add more API details and error handling</li>
</ul>
<h2 id='0-1-0'>0.1.0</h2>
<ul>
<li>Provide the original Partner API documentation</li>
</ul>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">shell</a>
          </div>
      </div>
    </div>
  </body>
</html>
