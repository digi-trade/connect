


<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
        <meta
            name="description"
            content="Documentation for the Cabital Connect API"
        >
    <title>Cabital Connect API Document</title>

    <style media="screen">
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cpf {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s, .highlight .sa, .highlight .dl {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf, .highlight .fm {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv, .highlight .vm {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .nl {
  color: #f92672;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <style media="print">
      * {
        -webkit-transition:none!important;
        transition:none!important;
      }
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #586e75;
}
.highlight .err {
  color: #002b36;
  background-color: #dc322f;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cm, .highlight .cpf, .highlight .c1, .highlight .cs {
  color: #657b83;
}
.highlight .cp {
  color: #b58900;
}
.highlight .nt {
  color: #b58900;
}
.highlight .o, .highlight .ow {
  color: #93a1a1;
}
.highlight .p, .highlight .pi {
  color: #93a1a1;
}
.highlight .gi {
  color: #859900;
}
.highlight .gd {
  color: #dc322f;
}
.highlight .gh {
  color: #268bd2;
  background-color: #002b36;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #6c71c4;
}
.highlight .kc {
  color: #cb4b16;
}
.highlight .kt {
  color: #cb4b16;
}
.highlight .kd {
  color: #cb4b16;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .dl, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #859900;
}
.highlight .sa {
  color: #6c71c4;
}
.highlight .sr {
  color: #2aa198;
}
.highlight .si {
  color: #d33682;
}
.highlight .se {
  color: #d33682;
}
.highlight .nn {
  color: #b58900;
}
.highlight .nc {
  color: #b58900;
}
.highlight .no {
  color: #b58900;
}
.highlight .na {
  color: #268bd2;
}
.highlight .m, .highlight .mb, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mx {
  color: #859900;
}
.highlight .ss {
  color: #859900;
}
    </style>
    <link href="../stylesheets/screen-c9d8fa83.css" rel="stylesheet" media="screen" />
    <link href="../stylesheets/print-953e3353.css" rel="stylesheet" media="print" />
      <script src="../javascripts/all-b12a2749.js"></script>

    <script>
      $(function() { setupCodeCopy(); });
    </script>
  </head>

  <body class="en en_index" data-languages="[&quot;shell&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="../images/navbar-cad8cdcb.png" alt="" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="../images/logo-c460f495.svg" class="logo" alt="" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">shell</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
          </li>
          <li>
            <a href="#authentication" class="toc-h1 toc-link" data-title="Authentication">Authentication</a>
          </li>
          <li>
            <a href="#partner-level-setting" class="toc-h1 toc-link" data-title="Partner Level Setting">Partner Level Setting</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#partner-configuration" class="toc-h2 toc-link" data-title="Partner Configuration">Partner Configuration</a>
                  </li>
                  <li>
                    <a href="#get-the-latest-quotation-get" class="toc-h2 toc-link" data-title="Get the Latest Quotation (GET)">Get the Latest Quotation (GET)</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#account-connect-related" class="toc-h1 toc-link" data-title="Account Connect related">Account Connect related</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#get-user-connection-status" class="toc-h2 toc-link" data-title="Get User Connection Status">Get User Connection Status</a>
                  </li>
                  <li>
                    <a href="#name-match" class="toc-h2 toc-link" data-title="Name Match">Name Match</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#account-operations" class="toc-h1 toc-link" data-title="Account Operations">Account Operations</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#list-of-available-account-balances" class="toc-h2 toc-link" data-title="List of Available Account Balances">List of Available Account Balances</a>
                  </li>
                  <li>
                    <a href="#available-account-balance-in-a-single-currency" class="toc-h2 toc-link" data-title="Available Account Balance in a Single Currency">Available Account Balance in a Single Currency</a>
                  </li>
                  <li>
                    <a href="#account-currency-deposite-information" class="toc-h2 toc-link" data-title="Account Currency Deposite Information">Account Currency Deposite Information</a>
                  </li>
                  <li>
                    <a href="#currency-conversion" class="toc-h2 toc-link" data-title="Currency Conversion">Currency Conversion</a>
                  </li>
                  <li>
                    <a href="#account-transfer-history" class="toc-h2 toc-link" data-title="Account Transfer History">Account Transfer History</a>
                  </li>
                  <li>
                    <a href="#account-transfer-details" class="toc-h2 toc-link" data-title="Account Transfer Details">Account Transfer Details</a>
                  </li>
                  <li>
                    <a href="#two-way-account-transfer" class="toc-h2 toc-link" data-title="Two-way Account Transfer">Two-way Account Transfer</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#callback-event" class="toc-h1 toc-link" data-title="Callback Event">Callback Event</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#account-connect-status-event" class="toc-h2 toc-link" data-title="Account Connect Status Event">Account Connect Status Event</a>
                  </li>
                  <li>
                    <a href="#event-signature" class="toc-h2 toc-link" data-title="Event signature">Event signature</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#error-handling-code" class="toc-h1 toc-link" data-title="Error Handling Code">Error Handling Code</a>
          </li>
          <li>
            <a href="#version-changes" class="toc-h1 toc-link" data-title="Version changes">Version changes</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#0-2-0" class="toc-h2 toc-link" data-title="0.2.0">0.2.0</a>
                  </li>
                  <li>
                    <a href="#0-1-1" class="toc-h2 toc-link" data-title="0.1.1">0.1.1</a>
                  </li>
                  <li>
                    <a href="#0-1-0" class="toc-h2 toc-link" data-title="0.1.0">0.1.0</a>
                  </li>
              </ul>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href='mailto:developer@cabital.com'>Sign Up for Partner Key</a></li>
            <li><a href='https://cabital.com/'>Copyright by Cabital 2021</a></li>
            <li><a href='/connect/'>中文</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p>By leveraging our Cabital Connect API, you can build a connection to crypto wallets to enable credit and debit functionality between Cabital and yourself (a partner). </p>

<p>Cabital Connect Cabailities：</p>

<ul>
<li>Server-side Authentication &amp; Authorization.</li>
<li>Estiabilish Cabital Connect between two parties&#39; crypto wallets through name matching interfaces</li>
<li>Query Cabital wallet balance, transfer balance into same beneficiary&#39;s wallet. </li>
<li>Convert currencies on behalf of user - and attach to transfer order.</li>
</ul>
<h1 id='authentication'>Authentication</h1>
<p>API Key / Secret is the credential to access Connect API. All the HTTPS calls need to be signed and include following HTTP Headers:</p>

<ul>
<li>ACCESS-KEY: Customer Access Key, provided by Cabital</li>
<li>ACCESS-SIGN: The signature build by the algorithm described below. </li>
<li>ACCESS-TIMESTAMP: API Access time stamp</li>
<li>ACCESS-NONCE: We use nonces to ensure that old communications cannot be reused. Each API call must used different nounce, otherwise, system will ignore the 2nd request arrived within 60 mins time frame.</li>
</ul>

<p>API Request must include <code>Content-Type</code> as <code>application/json</code> and the body must be in restricted JSON format.</p>

<p>ACCESS-SIGN Header is the sha256 HMAC hash by <code>time stamp + HTTP method + NONCE + access path + request body</code> with Secret Key.</p>

<ul>
<li>The timestamp should be the same as ACCESS-TIMESTAMP. </li>
<li>The request body is in the form of String, or regarded as empty, especially when accessing the API through GET</li>
<li>HTTP method must be uppercase, i.e. <code>GET</code> or <code>POST</code></li>
</ul>

<p>ACCESS-TIMESTAMP is from the Unix Epoch to the current number in seconds. The timestamp of the customer request must be within 30 seconds of the API service time, otherwise it will be considered expired or rejected directly.</p>

<aside class="warning">
Please do not share your Secret. Otherwise, it may cause information leakage and an unnecessary loss of transaction fees. If your Secret is leaked, please contact your service consultant immediately.
</aside>
<h1 id='partner-level-setting'>Partner Level Setting</h1>
<p>The partner system API is provided to the partner to perceive the status of cooperative account opening, system basic settings, and non-user level settings.</p>
<h2 id='partner-configuration'>Partner Configuration</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"http://partner.cabital.com/partners/partner_id/config"</span>
</code></pre></div><h3 id='http-request'>HTTP Request</h3>
<p><code>GET /api/v1/config</code></p>

<blockquote>
<p>Response Sample:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"currencies"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"symobl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
            </span><span class="nl">"deposit_methods"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"ERC20"</span><span class="p">,</span><span class="w"> </span><span class="s2">"SOL"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="nl">"withdrew_methods"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"ERC20"</span><span class="p">,</span><span class="w"> </span><span class="s2">"SOL"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="nl">"config"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"debit"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"min"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.01"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"max"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"credit"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"allow"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"min"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.01"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"max"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"conversion"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"allow"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"min"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.01"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"max"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5"</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"symobl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EUR"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> 
            </span><span class="nl">"deposit_methods"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"SEPA"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="nl">"withdrew_methods"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"SEPA"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="p">,</span><span class="w">
            </span><span class="nl">"config"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"debit"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"allow"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"credit"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"allow"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"conversion"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"allow"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"min"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.01"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"max"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5"</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='request-object'>Request Object</h3>
<p>symobl | string(ENUM) | currency symbol
type | int(ENUM) | currency type, see the explanation below for details
deposit_methods | list | Current deposit methods
withdraw_methods | list | Current withdrawal method
config | list(object) | restrictions and configuration of the currency</p>

<p>Config object definition</p>

<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>allow</td>
<td>bool</td>
<td>availability of the currency (killer switch)</td>
</tr>
<tr>
<td>min</td>
<td>string(number)</td>
<td>minimum amount per transaction</td>
</tr>
<tr>
<td>max</td>
<td>string(number)</td>
<td>maximum amount per transaction</td>
</tr>
</tbody></table>
<h3 id='enum'>Enum</h3>
<ul>
<li>Currency type</li>
</ul>

<table><thead>
<tr>
<th>Value</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>FIAT</td>
</tr>
<tr>
<td>2</td>
<td>Crypto Currency</td>
</tr>
</tbody></table>

<aside class="success">
The limit is for the entire partner, limit of a single transaction
</aside>
<h2 id='get-the-latest-quotation-get'>Get the Latest Quotation (GET)</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"http://partner.cabital.com/partners/partner_id/quotes/USDT-EUR"</span>
</code></pre></div><h3 id='http-request-2'>HTTP Request</h3>
<p><code>GET /api/v1/quotes/&lt;code_pair&gt;</code></p>
<h3 id='url-parameters'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>code_pair</td>
<td>true</td>
<td>The code_pair parameter uses <code>-</code> as the separator. The Cabital system will ignore the incoming order and sort according to its own rules. Therefore, a currency pair will always return the quotes in the same code pair order regardless of the incoming order and the buying and selling relationship, i.e. fetch USDT-EUR or EUR-USDT will return quotes in USDT-EUR pair.</td>
</tr>
</tbody></table>

<blockquote>
<p>Response Sample</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"ask"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.864962"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"valid_until"</span><span class="p">:</span><span class="w"> </span><span class="mi">1633426832</span><span class="p">,</span><span class="w">
    </span><span class="nl">"quote_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20211005094027:USDT-EUR:Customer"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"valid_interval"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
    </span><span class="nl">"bid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.16424"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='response-object'>Response Object</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>ask</td>
<td>string(number)</td>
<td>Sell <em>Left Code</em> in exchange for <em>Right Code</em> price</td>
</tr>
<tr>
<td>valid_until</td>
<td>number(timestamp)</td>
<td>The number in seconds from the Unix Epoch to the current, used to indicate the effective time of the quote</td>
</tr>
<tr>
<td>quote_id</td>
<td>string</td>
<td>The unique ID of the quotation, the format is [timestamp:quotation currency pair: quotation purpose]</td>
</tr>
<tr>
<td>valid_interval</td>
<td>number</td>
<td>The effective time duration of the quotation, in seconds</td>
</tr>
<tr>
<td>bid</td>
<td>string(number)</td>
<td>Sell <em>Right Code</em> in exchange for <em>Left Code</em> quotation</td>
</tr>
</tbody></table>

<aside class="success">
The symbol of FIAT is based on <a href="https://en.wikipedia.org/wiki/ISO_4217">ISO-4217</a>, and the crypto currency is based on <a href="https://coinmarketcap.com/ all/views/all/">CoinMarketCap</a> list
</aside>
<h1 id='account-connect-related'>Account Connect related</h1>
<p>Cabital Connect is subject to regulatory requirements. The access partner must provide the identity information (each field) consistent with this party. For field descriptions, please refer to the API for linking accounts with the same name.</p>
<h2 id='get-user-connection-status'>Get User Connection Status</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"http://partner.cabital.com/partners/partner_id/accounts/cdaa9983-9b8f-4478-ba60-896ac239879d/detail"</span>
</code></pre></div><h3 id='http-request'>HTTP Request</h3>
<p><code>GET /api/v1/accounts/&lt;account_id&gt;/detail</code></p>
<h3 id='url-parameters'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>account_id</td>
<td>true</td>
<td>Cabital Connect Account Id</td>
</tr>
</tbody></table>

<blockquote>
<p>Response Sample:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"match_status"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"MATCHED"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"otp_ready"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"email_address"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"john.doe@email.com"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"kyc_token"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"8yzhvhv87dahfb"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"limits"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>account_status</td>
<td>string(ENUM)</td>
<td>Status, see the definition in Events</td>
</tr>
<tr>
<td>otp_ready</td>
<td>bool</td>
<td>Whether the customer has completed the OTP binding in Cabital, it needs to be attached when withdrawing.</td>
</tr>
<tr>
<td>email_address</td>
<td>string</td>
<td>The user’s Email for the partner to match</td>
</tr>
<tr>
<td>kyc_token</td>
<td>string</td>
<td>The user&#39;s KYC Token for the partner to apply</td>
</tr>
<tr>
<td>limits</td>
<td>object</td>
<td>Current payment limit</td>
</tr>
</tbody></table>

<aside class="success">
Single account limit
</aside>
<h2 id='name-match'>Name Match</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"/api/v1/accounts/cdaa9983-9b8f-4478-ba60-896ac239879d/match"</span> <span class="se">\</span>
  <span class="nt">-X</span> <span class="s2">"PUT"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{ "name": "John Doe", "id": "J12345678D", "id_document": "PASSPORT", "dob": "19700101" }'</span> 
</code></pre></div><h3 id='http-request-2'>HTTP Request</h3>
<p><code>PUT /api/v1/accounts/&lt;account_id&gt;/match</code></p>
<h3 id='url-parameters-2'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>account_id</td>
<td>true</td>
<td>Cabital Connect Account Id</td>
</tr>
</tbody></table>
<h3 id='request-body'>Request Body</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>string</td>
<td>The full name of the customer, in accordance with the usual order on the document, such as First Name + (Middle Name) + Last Name</td>
</tr>
<tr>
<td>id</td>
<td>string</td>
<td>ID on the identity document</td>
</tr>
<tr>
<td>id_document</td>
<td>string(ENUM)</td>
<td>Identity document type (<code>ID,PASSPORT,DRIVER_LICENSE</code>)</td>
</tr>
<tr>
<td>issued_by</td>
<td>string</td>
<td>The country where the identity document was issued</td>
</tr>
<tr>
<td>dob</td>
<td>string</td>
<td>Date of birth format in <code>YYYYMMDD</code></td>
</tr>
</tbody></table>

<blockquote>
<p>Sample Response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MISMATCH"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"mismatch_fields"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"dob"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Submit user information to get the verification result of the same name control.</p>
<h3 id='error-message'>Error Message</h3>
<ul>
<li>HTTP 400 : Connection Status must be in CREATED or MISMATCHED</li>
</ul>
<h1 id='account-operations'>Account Operations</h1>
<p>List of Account Operation Business Errors</p>

<table><thead>
<tr>
<th>Error</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>PA001</td>
<td>Cabital account id does not exist</td>
</tr>
<tr>
<td>PA002</td>
<td>Insufficient account available balance</td>
</tr>
<tr>
<td>PA003</td>
<td>The transaction has not reached the minimum limit</td>
</tr>
<tr>
<td>PA004</td>
<td>The transaction exceeds the maximum limit</td>
</tr>
<tr>
<td>PA005</td>
<td>The requested transaction type is not available</td>
</tr>
<tr>
<td>PA006</td>
<td>The currency of the requested transaction request is not available</td>
</tr>
<tr>
<td>PA007</td>
<td>Quote has been expired</td>
</tr>
<tr>
<td>PA008</td>
<td>Incorrect 2FA (OTP)</td>
</tr>
<tr>
<td>PA009</td>
<td>The customer’s KYC status has not yet been matched</td>
</tr>
<tr>
<td>PA010</td>
<td>2FA (OTP) is not set properly</td>
</tr>
<tr>
<td>PA011</td>
<td>Convert&#39;s Quote usage is incorrect (Invalid Calculation)</td>
</tr>
</tbody></table>

<!-- ## 获取用户提现限额


```shell
curl "http://partner.cabital.com/api/v1/limit" \
  -H "Authorization: Bearer"
```

### HTTP 请求

`GET /api/v1/limit`


> Response Sample:

```json
[
  {
    "id": 1,
    "name": "Fluffums",
    "breed": "calico",
    "fluffiness": 6,
    "cuteness": 7
  },
  {
    "id": 2,
    "name": "Max",
    "breed": "unknown",
    "fluffiness": 5,
    "cuteness": 10
  }
]
```
<aside class="success">
用户级别的限额
</aside>

获取该账户的提款限额（根据账户的AML规则）



> Response Sample:

```json
[
  {
    "code": "BTC",
    "balances": "1",
    "allow_debit": true,
    "allow_credit": true
  },
  {
    "code": "ETH",
    "balances": "1",
    "allow_debit": true,
    "allow_credit": true
  },
  {
    "code": "USDT",
    "balances": "1",
    "allow_debit": true,
    "allow_credit": true
  },
  {
    "code": "EUR",
    "balances": "1",
    "allow_debit": false,
    "allow_credit": false
  },
  {
    "code": "GBP",
    "balances": "1.0",
    "allow_debit": false,
    "allow_credit": false
  }
]
```

获取用户的所有账户余额

### HTTP Request

`GET /api/v1/accounts/<account_id>/balances`

### URL Parameters

Parameter | Default | Description
--------- | ------- | -----------
account_id | true | Cabital Connect Account Id -->
<h2 id='list-of-available-account-balances'>List of Available Account Balances</h2>
<p>Get all account balances of the user</p>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"/api/v1/accounts/{account_id}/balances"</span>
</code></pre></div>
<blockquote>
<p>Response Sample:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"balances"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.12345678"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"balances"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.000000000"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"balances"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1200.000000"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EUR"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"balances"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.00"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GBP"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"balances"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.00"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div><h3 id='http-request'>HTTP Request</h3>
<p><code>GET /api/v1/accounts/&lt;account_id&gt;/balances</code></p>
<h3 id='url-parameters'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>account_id</td>
<td>true</td>
<td>Cabital Connect Account Id</td>
</tr>
</tbody></table>
<h2 id='available-account-balance-in-a-single-currency'>Available Account Balance in a Single Currency</h2>
<p>Get the user&#39;s single account balance, please refer to the currency symbol <a href="/connect/en/#get-the-latest-quotation-get">Quotation API</a></p>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"/api/v1/accounts/6d92e7b4-715c-4ce3-a028-19f1c8c9fa6c/balances/BTC"</span>
</code></pre></div>
<blockquote>
<p>Response Sample:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"balances"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.12345678"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='http-request-2'>HTTP Request</h3>
<p><code>GET /api/v1/accounts/&lt;account_id&gt;/balances/&lt;symbol&gt;</code></p>
<h3 id='url-parameters-2'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>account_id</td>
<td>true</td>
<td>Cabital Connect Account Id</td>
</tr>
<tr>
<td>symbol</td>
<td>true</td>
<td>Currency Symbol</td>
</tr>
</tbody></table>
<h2 id='account-currency-deposite-information'>Account Currency Deposite Information</h2>
<p>Get account currency deposite information</p>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"/api/v1/accounts/6d92e7b4-715c-4ce3-a028-19f1c8c9fa6c/balances/EUR/deposit/SEPA"</span>
</code></pre></div>
<blockquote>
<p>Response Sample:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SEPA"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"account_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cabital Fintech (LT) UAB"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"iban"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LT493780000074448705"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"ref_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"N6FH7B"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"bic"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TRYULT21XXX"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"bank_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Transactive Systems UAB"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"bank_address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Verkių g. 25C-1, Vilnius"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"bank_country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Lithuania"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='http-request-3'>HTTP Request</h3>
<p><code>GET /api/v1/accounts/&lt;account_id&gt;/balances/&lt;symbol&gt;/deposit/&lt;method&gt;</code></p>
<h3 id='url-parameters-3'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>account_id</td>
<td>true</td>
<td>Cabital Connect Account Id</td>
</tr>
<tr>
<td>symbol</td>
<td>true</td>
<td>Currency symbol</td>
</tr>
<tr>
<td>method</td>
<td>false</td>
<td>The deposit method currency is not required. If missing, the default method will be used. Please use the method defined in<a href="/?shell#79fee25901">Configuration API</a></td>
</tr>
</tbody></table>
<h2 id='currency-conversion'>Currency Conversion</h2>
<p>Through the method of conversion between Cabital&#39;s account balances, exchange different currencies. By converting currencies, you can trade currencies that Cabital does not support transfer by converting first and then transferring (C+T)</p>

<p>You can exchange different currencies. By converting currencies, you can also trade currencies that Cabital does not support by converting them first to a supporting currency and then transferring (convert and then transfer).</p>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="s2">"/api/v1/accounts/6d92e7b4-715c-4ce3-a028-19f1c8c9fa6c/conversions"</span>
<span class="nt">-d</span> <span class="s1">'{
    "quote_id": "20210416225049:BTC-USDT:Customer",
    "quote": "61426.365",
    "pair": "BTC-USDT",
    "buy_amount": "0.001",
    "sell_amount": "61.426365",
    "major_ccy": "BTC"
}'</span>
</code></pre></div>
<blockquote>
<p>Request Sample:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"quote_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20210416225049:BTC-USDT:Customer"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"quote"</span><span class="p">:</span><span class="w"> </span><span class="s2">"61426.365"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"pair"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-USDT"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"buy_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.001"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"sell_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"61.426365"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"major_ccy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Response Sample:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"transaction_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d81adf6d-0322-41d7-8c32-669203e35f11"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUCCESS"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='http-request-4'>HTTP Request</h3>
<p><code>POST /api/v1/accounts/&lt;account_id&gt;/conversions</code></p>
<h3 id='url-parameters-4'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>account_id</td>
<td>true</td>
<td>Cabital Connect Account Id</td>
</tr>
</tbody></table>
<h3 id='request-object'>Request Object</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>quote_id</td>
<td>string</td>
<td>The unique identifier of the quote</td>
</tr>
<tr>
<td>quote</td>
<td>string(number)</td>
<td>Qsuote</td>
</tr>
<tr>
<td>pair</td>
<td>string</td>
<td>The currency pair that is to be quoted. The left side repesents what is being bought. The right side represents what is being sold.</td>
</tr>
<tr>
<td>buy_amount</td>
<td>string(number)</td>
<td>Buy amount</td>
</tr>
<tr>
<td>sell_amount</td>
<td>string(number)</td>
<td>Sell amount</td>
</tr>
<tr>
<td>major_ccy</td>
<td>string</td>
<td>Major currency, used to determine the conversion quota</td>
</tr>
</tbody></table>

<aside class="warning">
<b>Attention：</b>
<ul>
  <li>Be sure to pay attention to the direction of the pair. The left side repesents what is being bought. The right side represents what is being sold. </li>
  <li>Because the quotation supports Ask & Bid, no matter if you are buying or selling, it will be the same quotation pair. </li>
</ul>
</aside>
<h2 id='account-transfer-history'>Account Transfer History</h2>
<p>Query transfer history records. Filter query and pagination are supported.</p>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"/api/v1/accounts/6d92e7b4-715c-4ce3-a028-19f1c8c9fa6c/transfers"</span>
</code></pre></div>
<blockquote>
<p>Response Sample:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"pagination_response"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"cursor"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"transfers"</span><span class="p">:[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"transfer_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4c416854-8970-4838-99ad-febc437ac81d"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1000.365"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEBIT"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"conversion_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d81adf6d-0322-41d7-8c32-669203e35f11"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"external_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"adb8f31d-7a71-4003-85d7-3ac58158461f"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1633445162</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"transfer_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4c416854-8971-4838-99ad-febc437ac81d"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.365"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CREDIT"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"conversion_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d81adf6d-0322-41d7-8c32-669203e35f11"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"external_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"adb8f31d-7a71-4003-85d7-3ac58158461f"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1633445160</span><span class="w">
    </span><span class="p">},</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='http-request-5'>HTTP Request</h3>
<p><code>GET /api/v1/accounts/&lt;account_id&gt;/transfers</code></p>
<h3 id='url-parameters-5'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>account_id</td>
<td>true</td>
<td>--</td>
<td>Cabital Connect Account Id</td>
</tr>
<tr>
<td>direction</td>
<td>false</td>
<td>2 Ways</td>
<td>Filter by direction <code>CREDIT</code> / <code>DEBIT</code></td>
</tr>
<tr>
<td>symbol</td>
<td>false</td>
<td>all currencies</td>
<td>Filter for currencies</td>
</tr>
<tr>
<td>cursor</td>
<td>false</td>
<td>0</td>
<td>Result set cursor</td>
</tr>
<tr>
<td>page_size</td>
<td>false</td>
<td>10</td>
<td>Page size（1-30）</td>
</tr>
<tr>
<td>has_conversion</td>
<td>false</td>
<td>both</td>
<td>Bool type (filter whether there are related conversion orders)</td>
</tr>
<tr>
<td>created_from</td>
<td>false</td>
<td>0</td>
<td>Create order start time (Unix Time Epoch in seconds)</td>
</tr>
<tr>
<td>created_to</td>
<td>false</td>
<td>NOW</td>
<td>Create order end time (Unix Time Epoch in seconds)</td>
</tr>
</tbody></table>
<h3 id='response-object'>Response Object</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transfer_id</td>
<td>string(uuid)</td>
<td>Transfer order id</td>
</tr>
<tr>
<td>amount</td>
<td>string(number)</td>
<td>Amount</td>
</tr>
<tr>
<td>symbol</td>
<td>string</td>
<td>Currency symbol</td>
</tr>
<tr>
<td>direction</td>
<td>string(enum)</td>
<td>The direction of the transfer to Cabital. <code>CREDIT</code> for top up into the Cabital Account. <code>DEBIT</code> for withdraw out of the Cabital Account.</td>
</tr>
<tr>
<td>conversion_id</td>
<td>string(uuid)</td>
<td>The conversion order ID in C+T related transactions, optional</td>
</tr>
<tr>
<td>external_id</td>
<td>string(50)</td>
<td>The third-party ID of the partner</td>
</tr>
<tr>
<td>status</td>
<td>string(enum)</td>
<td>The result of the transfer (SUCCESS / FAILED)</td>
</tr>
</tbody></table>
<h2 id='account-transfer-details'>Account Transfer Details</h2>
<p>Transfer Details</p>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"/api/v1/accounts/6d92e7b4-715c-4ce3-a028-19f1c8c9fa6c/transfers/4c416854-8970-4838-99ad-febc437ac81d"</span>
</code></pre></div>
<blockquote>
<p>Response Sample:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"transfer_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4c416854-8970-4838-99ad-febc437ac81d"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1000.365"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEBIT"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"conversion_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d81adf6d-0322-41d7-8c32-669203e35f11"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"external_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"adb8f31d-7a71-4003-85d7-3ac58158461f"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1633445162</span><span class="p">,</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUCCESS"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='http-request-6'>HTTP Request</h3>
<p><code>GET /api/v1/accounts/&lt;account_id&gt;/transfers/&lt;trasfer_id&gt;</code></p>
<h3 id='url-parameters-6'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>account_id</td>
<td>true</td>
<td>Cabital Connect Account Id</td>
</tr>
<tr>
<td>trasfer_id</td>
<td>true</td>
<td>Transfer order id</td>
</tr>
</tbody></table>
<h3 id='response-object-2'>Response Object</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transfer_id</td>
<td>string(uuid)</td>
<td>Transfer order id</td>
</tr>
<tr>
<td>amount</td>
<td>string(number)</td>
<td>Amount</td>
</tr>
<tr>
<td>symbol</td>
<td>string</td>
<td>Currency symbol</td>
</tr>
<tr>
<td>direction</td>
<td>string(enum)</td>
<td>The direction of the transfer to Cabital. CREDIT for top up into the Cabital Account. DEBIT for withdraw out of the Cabital Account.</td>
</tr>
<tr>
<td>conversion_id</td>
<td>string(uuid)</td>
<td>The conversion order ID in Convert+Transfer related transactions (optional)</td>
</tr>
<tr>
<td>external_id</td>
<td>string(50)</td>
<td>The third-party ID of the partner, not required</td>
</tr>
<tr>
<td>status</td>
<td>string(enum)</td>
<td>The result of the transfer, SUCCESS / FAILED</td>
</tr>
</tbody></table>
<h2 id='two-way-account-transfer'>Two-way Account Transfer</h2>
<p>Transfer between Cabital and the partner’s account under the same name.</p>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="s2">"/api/v1/accounts/6d92e7b4-715c-4ce3-a028-19f1c8c9fa6c/transfers"</span>
<span class="nt">-d</span> <span class="s1">'{
    "amount": "1000.365",
    "symbol": "USDT",
    "direction": "debit",
    "conversion_id": "d81adf6d-0322-41d7-8c32-669203e35f11",
    "external_id": "adb8f31d-7a71-4003-85d7-3ac58158461f"
}'</span>
</code></pre></div>
<blockquote>
<p>Request Sample:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1000.365"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"debit"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"conversion_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d81adf6d-0322-41d7-8c32-669203e35f11"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"external_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"adb8f31d-7a71-4003-85d7-3ac58158461f"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Response Sample:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"transfer_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4c416854-8970-4838-99ad-febc437ac81d"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUCCESS"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='http-request-7'>HTTP Request</h3>
<p><code>POST /api/v1/accounts/&lt;account_id&gt;/transfers</code></p>
<h3 id='url-parameters-7'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>account_id</td>
<td>true</td>
<td>Cabital Connect Account Id</td>
</tr>
</tbody></table>
<h3 id='request-object-2'>Request Object</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>amount</td>
<td>string(number)</td>
<td>Amount</td>
</tr>
<tr>
<td>symbol</td>
<td>string</td>
<td>Currency symbol</td>
</tr>
<tr>
<td>otp</td>
<td>string</td>
<td>OTP Number (6 digits from Google Authenticator)</td>
</tr>
<tr>
<td>direction</td>
<td>string(enum)</td>
<td>The direction of the transfer to Cabital. <code>CREDIT</code> for top up into the Cabital Account. <code>DEBIT</code> for withdraw out of the Cabital Account.</td>
</tr>
<tr>
<td>conversion_id</td>
<td>string(uuid)</td>
<td>The conversion order ID in C+T related transactions, optional</td>
</tr>
<tr>
<td>external_id</td>
<td>string(50)</td>
<td>The third-party ID of the partner, must be unique for one partner</td>
</tr>
</tbody></table>
<h3 id='response-object-3'>Response Object</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transfer_id</td>
<td>string(uuid)</td>
<td>Transfer id</td>
</tr>
<tr>
<td>external_id</td>
<td>string(50)</td>
<td>The third-party ID of the partner, must be unique for one partner</td>
</tr>
<tr>
<td>status</td>
<td>string(enum)</td>
<td>The result of the transfer (SUCCESS / FAILED)</td>
</tr>
</tbody></table>
<h1 id='callback-event'>Callback Event</h1>
<p>Callback events are expected to arrive within 1-5 minutes on average, but in theory it may take up to 24 hours. If you miss the Callback event for some reason, don’t worry. We will resend the failed Callback event. If the Callback event request fails, we will try to resend it four times: after 5 minutes, 1 hour, 5 hours, and 18 hours, until the request succeeds and obtains a 2XX return code.</p>

<p>We recommend that you wait no more than a day for the Callback event, and then send a request to our server to obtain status information about the resource.</p>
<h2 id='account-connect-status-event'>Account Connect Status Event</h2>
<p>When the user initiates a connection from the counterparty, the system will send an account association status event based on the current connection status, which includes the following states:</p>

<table><thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>INITIALIZED</td>
<td>The user has successfully registered and has not yet submitted KYC in Cabital</td>
</tr>
<tr>
<td>PENDING</td>
<td>The user has submitted KYC in Cabital &amp; Cabital is processing the user identification documents</td>
</tr>
<tr>
<td>TEMPORARY_REJECTED</td>
<td>The user has submitted KYC in Cabital &amp; Cabital has requested the user to provide more materials</td>
</tr>
<tr>
<td>FINAL_REJECTED</td>
<td>The user has submitted KYC in Cabital &amp; Cabital has rejected the user</td>
</tr>
<tr>
<td>CREATED</td>
<td>The user has passed Cabital&#39;s KYC. The Cabital account has been opened &amp; is waiting for the partner to submit the same name verification.</td>
</tr>
<tr>
<td>MATCHING</td>
<td>The user has passed Cabital&#39;s KYC and the partner has been submitted the same name verfication, which is under manual review.</td>
</tr>
<tr>
<td>MATCHED</td>
<td>The user has passed Cabital&#39;s KYC and same name verification has passed successfully. The same account transfer is now fully available.</td>
</tr>
<tr>
<td>MISMATCHED</td>
<td>The user has passed Cabital&#39;s KYC but the same name verification was rejected. This could happen for multiple reasons.</td>
</tr>
<tr>
<td>UNLINKED</td>
<td>The user / Cabital actively closes the connection with an account of the partner</td>
</tr>
</tbody></table>

<!-- READYFORMATCHING | 我方KYC通过，等待合作方提交同名验证 (以后）-->

<p>When the status of the account connection changes, we will send you a POST request with a JSON payload to the URL provided to us during integration.</p>
<h3 id='json-payload'>JSON Payload</h3>
<blockquote>
<p>JSON Payload</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"account_uuid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6d92e7b4-715c-4ce3-a028-19f1c8c9fa6c"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"user_email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jone.doe@email.com"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"user_ext_ref"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fce4fd45-7dd7-4d4c-b06c-e17ff12f3e30"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"staus"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INITIALIZED"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"event_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-07-01T09:00:00.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"data"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>account_uuid</td>
<td>string</td>
<td>true</td>
<td>This party&#39;s account Id</td>
</tr>
<tr>
<td>user_email</td>
<td>string</td>
<td>true</td>
<td>The user email of the account</td>
</tr>
<tr>
<td>user_ext_ref</td>
<td>string</td>
<td>true</td>
<td>External Id entered by the partner</td>
</tr>
<tr>
<td>staus</td>
<td>string(enum)</td>
<td>true</td>
<td>status of account association</td>
</tr>
<tr>
<td>staus</td>
<td>datestamp</td>
<td>true</td>
<td>The time when the event occurred, in the format <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601</a></td>
</tr>
<tr>
<td>data</td>
<td>object</td>
<td>false</td>
<td>Some additional data associated with the account, such as Shared Token</td>
</tr>
</tbody></table>

<!-- ## Transfer事件

当对手方发起划转后，系统会根据现在的划转状态发送 Transfer事件 事件，其包含以下几个状态：

- SUCCESS
- FAILED

<aside class="notice">
通常不需要监听 Transfer 事件，因为Transfer结果是同期返回给对手方的。
</aside>
### 事件内容 JSON Payload

> JSON Payload
 
```json
{
    "transfer_id": "4c416854-8970-4838-99ad-febc437ac81d",
    "amount": "1000.365",
    "symbol": "USDT",
    "direction": "DEBIT",
    "conversion_id": "d81adf6d-0322-41d7-8c32-669203e35f11",
    "external_id": "adb8f31d-7a71-4003-85d7-3ac58158461f",
    "created_at": 1633445162,
    "status": "SUCCESS"
}
```

Field | Type | Description
--------- | ------- | -----------
transfer_id | string(uuid) | 划转订单ID
amount | string(number) | 数量
symbol | string | 划转的货币
direction | string(enum) | 划转的方向，以Cabital为中心，`CREDIT`为充值，`DEBIT`为提款
conversion_id | string(uuid) | C+T关联交易中的转换订单ID，非必须
external_id | string(50) | 合作方的第三方ID，非必需
status | string(enum) | 划转的结果，SUCCESS / FAILED -->
<h2 id='event-signature'>Event signature</h2>
<p>Webhook signature rules are consistent with API authentication, please refer to <a href="#api">API authentication</a></p>
<h1 id='error-handling-code'>Error Handling Code</h1>
<p>System error handling</p>

<table><thead>
<tr>
<th>Error code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request - There is an error in parameters</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized - API Secret error or Request signature error</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden - Usually the customer has canceled the association with the partner&#39;s account, and the partner needs to initiate a re-association. (Unlink status)</td>
</tr>
<tr>
<td>404</td>
<td>Not Found - The specific resource does not exist</td>
</tr>
<tr>
<td>405</td>
<td>Method Not Allowed - The method of access is incorrect</td>
</tr>
<tr>
<td>406</td>
<td>Not Acceptable - The format you sent incorrect. The mandatory format is JSON; no other formats are accepted.</td>
</tr>
<tr>
<td>409</td>
<td>Conflict - The message violates idempotence (NONCE)</td>
</tr>
<tr>
<td>429</td>
<td>Too Many Requests - Too many requests</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error - A server error occurred on this party, please try again.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable - Our service is unavailable, please try again later.</td>
</tr>
</tbody></table>
<h1 id='version-changes'>Version changes</h1><h2 id='0-2-0'>0.2.0</h2>
<ul>
<li>Standardized the product name, changed from <code>partner</code> to <code>cabital connect</code></li>
<li>Added partner preparation documents to prepare for the partner&#39;s access to its own system</li>
<li>Minor adjustments in the naming of the Connect status, which refines the two different properties of <code>Rejected</code></li>
<li>Added error handling of the account, adjusted the status, and converted it to config</li>
</ul>
<h2 id='0-1-1'>0.1.1</h2>
<ul>
<li>API-Key has been restored to speed up the integration of Connect for partners who have integrated CaaS</li>
<li>Due to the use of API-Key, remove the Partner Id in the access Path</li>
<li>Add more API details and error handling</li>
</ul>
<h2 id='0-1-0'>0.1.0</h2>
<ul>
<li>Provide the original Partner API documentation</li>
</ul>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">shell</a>
          </div>
      </div>
    </div>
  </body>
</html>
