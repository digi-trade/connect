
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
        <meta
            name="description"
            content="Documentation for the Cabital Connect API"
        >
    <title>Cabital Connect API Document</title>

    <style media="screen">
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cpf {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s, .highlight .sa, .highlight .dl {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf, .highlight .fm {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv, .highlight .vm {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .nl {
  color: #f92672;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <style media="print">
      * {
        -webkit-transition:none!important;
        transition:none!important;
      }
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #586e75;
}
.highlight .err {
  color: #002b36;
  background-color: #dc322f;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cm, .highlight .cpf, .highlight .c1, .highlight .cs {
  color: #657b83;
}
.highlight .cp {
  color: #b58900;
}
.highlight .nt {
  color: #b58900;
}
.highlight .o, .highlight .ow {
  color: #93a1a1;
}
.highlight .p, .highlight .pi {
  color: #93a1a1;
}
.highlight .gi {
  color: #859900;
}
.highlight .gd {
  color: #dc322f;
}
.highlight .gh {
  color: #268bd2;
  background-color: #002b36;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #6c71c4;
}
.highlight .kc {
  color: #cb4b16;
}
.highlight .kt {
  color: #cb4b16;
}
.highlight .kd {
  color: #cb4b16;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .dl, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #859900;
}
.highlight .sa {
  color: #6c71c4;
}
.highlight .sr {
  color: #2aa198;
}
.highlight .si {
  color: #d33682;
}
.highlight .se {
  color: #d33682;
}
.highlight .nn {
  color: #b58900;
}
.highlight .nc {
  color: #b58900;
}
.highlight .no {
  color: #b58900;
}
.highlight .na {
  color: #268bd2;
}
.highlight .m, .highlight .mb, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mx {
  color: #859900;
}
.highlight .ss {
  color: #859900;
}
    </style>
    <link href="../stylesheets/screen-c9d8fa83.css" rel="stylesheet" media="screen" />
    <link href="../stylesheets/print-953e3353.css" rel="stylesheet" media="print" />
      <script src="../javascripts/all-b12a2749.js"></script>

    <script>
      $(function() { setupCodeCopy(); });
    </script>
  </head>

  <body class="en en_index" data-languages="[&quot;shell&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="../images/navbar-cad8cdcb.png" alt="" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="../images/logo-c460f495.svg" class="logo" alt="" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">shell</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
          </li>
          <li>
            <a href="#prepare-for-integration" class="toc-h1 toc-link" data-title="Prepare for Integration">Prepare for Integration</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#why-does-connect-use-oidc" class="toc-h2 toc-link" data-title="Why does connect use OIDC?">Why does connect use OIDC?</a>
                  </li>
                  <li>
                    <a href="#1-partner-apis" class="toc-h2 toc-link" data-title="1. Partner APIs">1. Partner APIs</a>
                  </li>
                  <li>
                    <a href="#2-oidc-api-resources" class="toc-h2 toc-link" data-title="2. OIDC API Resources">2. OIDC API Resources</a>
                  </li>
                  <li>
                    <a href="#3-resources" class="toc-h2 toc-link" data-title="3. Resources">3. Resources</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#authentication" class="toc-h1 toc-link" data-title="Authentication">Authentication</a>
          </li>
          <li>
            <a href="#partner-level-api" class="toc-h1 toc-link" data-title="Partner Level API">Partner Level API</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#partner-configuration" class="toc-h2 toc-link" data-title="Partner Configuration">Partner Configuration</a>
                  </li>
                  <li>
                    <a href="#get-the-latest-quotation-get" class="toc-h2 toc-link" data-title="Get the Latest Quotation (GET)">Get the Latest Quotation (GET)</a>
                  </li>
                  <li>
                    <a href="#reconciliation" class="toc-h2 toc-link" data-title="Reconciliation">Reconciliation</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#account-connect" class="toc-h1 toc-link" data-title="Account Connect">Account Connect</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#get-user-connection-status" class="toc-h2 toc-link" data-title="Get User Connection Status">Get User Connection Status</a>
                  </li>
                  <li>
                    <a href="#name-match" class="toc-h2 toc-link" data-title="Name Match">Name Match</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#account-operations" class="toc-h1 toc-link" data-title="Account Operations">Account Operations</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#list-of-account-operation-business-errors" class="toc-h2 toc-link" data-title="List of Account Operation Business Errors">List of Account Operation Business Errors</a>
                  </li>
                  <li>
                    <a href="#supported-currency-decimal-table" class="toc-h2 toc-link" data-title="Supported Currency Decimal Table">Supported Currency Decimal Table</a>
                  </li>
                  <li>
                    <a href="#list-of-available-account-balances" class="toc-h2 toc-link" data-title="List of Available Account Balances">List of Available Account Balances</a>
                  </li>
                  <li>
                    <a href="#available-account-balance-in-a-single-currency" class="toc-h2 toc-link" data-title="Available Account Balance in a Single Currency">Available Account Balance in a Single Currency</a>
                  </li>
                  <li>
                    <a href="#account-currency-deposite-information" class="toc-h2 toc-link" data-title="Account Currency Deposite Information">Account Currency Deposite Information</a>
                  </li>
                  <li>
                    <a href="#currency-conversion" class="toc-h2 toc-link" data-title="Currency Conversion">Currency Conversion</a>
                  </li>
                  <li>
                    <a href="#account-transfer-history" class="toc-h2 toc-link" data-title="Account Transfer History">Account Transfer History</a>
                  </li>
                  <li>
                    <a href="#account-transfer-details" class="toc-h2 toc-link" data-title="Account Transfer Details">Account Transfer Details</a>
                  </li>
                  <li>
                    <a href="#two-way-account-transfer" class="toc-h2 toc-link" data-title="Two-way Account Transfer">Two-way Account Transfer</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#callback-event" class="toc-h1 toc-link" data-title="Callback Event">Callback Event</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#account-connect-status-event" class="toc-h2 toc-link" data-title="Account Connect Status Event">Account Connect Status Event</a>
                  </li>
                  <li>
                    <a href="#event-signature" class="toc-h2 toc-link" data-title="Event signature">Event signature</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#error-handling-code" class="toc-h1 toc-link" data-title="Error Handling Code">Error Handling Code</a>
          </li>
          <li>
            <a href="#version-changes" class="toc-h1 toc-link" data-title="Version changes">Version changes</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#0-2-5" class="toc-h2 toc-link" data-title="0.2.5">0.2.5</a>
                  </li>
                  <li>
                    <a href="#0-2-4" class="toc-h2 toc-link" data-title="0.2.4">0.2.4</a>
                  </li>
                  <li>
                    <a href="#0-2-3" class="toc-h2 toc-link" data-title="0.2.3">0.2.3</a>
                  </li>
                  <li>
                    <a href="#0-2-2" class="toc-h2 toc-link" data-title="0.2.2">0.2.2</a>
                  </li>
                  <li>
                    <a href="#0-2-1" class="toc-h2 toc-link" data-title="0.2.1">0.2.1</a>
                  </li>
                  <li>
                    <a href="#0-2-0" class="toc-h2 toc-link" data-title="0.2.0">0.2.0</a>
                  </li>
                  <li>
                    <a href="#0-1-1" class="toc-h2 toc-link" data-title="0.1.1">0.1.1</a>
                  </li>
                  <li>
                    <a href="#0-1-0" class="toc-h2 toc-link" data-title="0.1.0">0.1.0</a>
                  </li>
              </ul>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href='mailto:developer@cabital.com'>Sign Up for Partner Key</a></li>
            <li><a href='https://www.cabital.com/'>Copyright by Cabital 2021</a></li>
            <li><a href='/connect/'>中文</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p>By leveraging our Cabital Connect API, you can build a connection to crypto wallets to enable credit and debit functionality between Cabital and yourself (a partner). </p>

<p>Cabital Connect Cabailities：</p>

<ul>
<li>Server-side Authentication &amp; Authorization.</li>
<li>Estiabilish Cabital Connect between two parties&#39; crypto wallets through name matching interfaces</li>
<li>Query Cabital wallet balance, transfer balance into same beneficiary&#39;s wallet. </li>
<li>Convert currencies on behalf of user - and attach to transfer order.</li>
</ul>
<h1 id='prepare-for-integration'>Prepare for Integration</h1>
<p>The following section will introduce how partner could integrate seamlessly with cabital through OpenID connect (OIDC).</p>
<h3 id='why-does-connect-use-oidc'>Why does connect use OIDC?</h3>
<p>The Cabital Connect product will connect users between two platforms, the user should have exactly one to one binding relationship. OIDC could ensure the user could have seamless experiences to finish KYC match and setup account in both platform vice versa.</p>

<p>Also, Connect will build both API and Widget (In the roadmap), OIDC could provide very flexible solutions to different partner to use different type of integration.</p>
<h2 id='1-partner-apis'>1. Partner APIs</h2>
<p><strong>Partner should provide：</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Value Example</th>
<th>Comments</th>
</tr>
</thead><tbody>
<tr>
<td>Authorized origins</td>
<td>https://partner.com</td>
<td></td>
</tr>
<tr>
<td>Authorization URL</td>
<td>https://partner.com/auth</td>
<td>Partner Callback URL</td>
</tr>
<tr>
<td>Token URL</td>
<td>https://partner.com/token</td>
<td>Auth Request Interface</td>
</tr>
<tr>
<td>User Info URL</td>
<td>https://partner.com/account/info</td>
<td>Optional, in case the token didn&#39;t include email</td>
</tr>
<tr>
<td>Client ID</td>
<td>077795d9-e7ec-4b07-8011-9909418c3ad8</td>
<td>The client or client identifier registered within the identity provider.</td>
</tr>
<tr>
<td>Client Secret</td>
<td>secret_terces</td>
<td>The client or client secret registered within the identity provider.</td>
</tr>
<tr>
<td>Client Authentication</td>
<td>Basic Authentication</td>
<td>By default it should be basic authentication, we do support other methods, reach out to your consultant.</td>
</tr>
</tbody></table>

<p><strong>Cabital will provide：</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Value</th>
<th>Comments</th>
</tr>
</thead><tbody>
<tr>
<td>Client ID</td>
<td><code>Client_ID</code></td>
<td>OAuth 2 Client ID</td>
</tr>
<tr>
<td>Client Secret</td>
<td><code>Client_SECRET</code></td>
<td>OAuth 2 Client Secret</td>
</tr>
<tr>
<td>Partner Base URL</td>
<td><a href="https://domain/{partner-id}">https://domain/{partner-id}</a></td>
<td>Domain URL</td>
</tr>
<tr>
<td>OIDC Configuration</td>
<td><a href="https://domain/{partner-id}/oidc-configuration">https://domain/{partner-id}/oidc-configuration</a></td>
<td>openid-configuration configuration</td>
</tr>
</tbody></table>
<h2 id='2-oidc-api-resources'>2. OIDC API Resources</h2><h3 id='2-1-auth-request-interface'>2.1 Auth request Interface</h3>
<p>Login or Connect through partner&#39;s OIDC.</p>

<p><strong>Request URL</strong></p>
<div class="highlight"><pre class="highlight shell tab-shell"><code>https://<span class="o">{</span>Partner Authorization URL<span class="o">}</span>
</code></pre></div>
<p><strong>Primary Parameters：</strong></p>

<table><thead>
<tr>
<th style="text-align: left">Parameter</th>
<th style="text-align: left">Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">response_type</td>
<td style="text-align: left">REQUIRED.  Value is  ‘code’</td>
</tr>
<tr>
<td style="text-align: left">client_id</td>
<td style="text-align: left">REQUIRED. OAuth2 Client identifier created by Cabital</td>
</tr>
<tr>
<td style="text-align: left">redirect_url</td>
<td style="text-align: left">REQUIRED. Redirection URI to which the response will be sent. This URI MUST exactly match one of the Redirection URI values for the Client pre-registered at Cabital</td>
</tr>
<tr>
<td style="text-align: left">scope</td>
<td style="text-align: left">REQUIRED. See the scope options in the table below</td>
</tr>
<tr>
<td style="text-align: left">state</td>
<td style="text-align: left">OPTIONAL. Opaque value used to maintain state between the request and the callback. Returned as a URL parameter on the authentication response.</td>
</tr>
</tbody></table>

<p><strong>Supported scopes：</strong></p>

<table><thead>
<tr>
<th style="text-align: left"><strong>Scope</strong></th>
<th style="text-align: left">Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">basic</td>
<td style="text-align: left">REQUIRED. Makes the Openid Connect authentication flow possible and includes the <code>id_token</code> in the response</td>
</tr>
<tr>
<td style="text-align: left">email</td>
<td style="text-align: left">OPTIONAL. To include the users email address in the <code>id_token</code></td>
</tr>
</tbody></table>

<p><strong>HTTP Method</strong></p>

<ul>
<li> GET:  Parameters are URL encoded in the query string.</li>
</ul>

<p><strong>Error Code:</strong></p>

<table><thead>
<tr>
<th>HTTP Satus Code</th>
<th style="text-align: left">Check</th>
<th>Reponse        Code</th>
<th style="text-align: left">Reponse Message</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td style="text-align: left">The <code>redirect_uri</code> must be known to Cabital for the Service.</td>
<td>001201</td>
<td style="text-align: left">invalid_request</td>
</tr>
<tr>
<td>400</td>
<td style="text-align: left">The response_type parameter must be “code”.</td>
<td>001202</td>
<td style="text-align: left">unsupported_response_type</td>
</tr>
<tr>
<td>400</td>
<td style="text-align: left">The <code>client_id</code> must refer to a Service in Cabital for which OpenID has been configured.</td>
<td>001203</td>
<td style="text-align: left">invalid_client_id</td>
</tr>
<tr>
<td>400</td>
<td style="text-align: left">The scope must contain “openid”</td>
<td>001204</td>
<td style="text-align: left">invalid_scope</td>
</tr>
</tbody></table>

<p><strong>Example：</strong></p>
<div class="highlight"><pre class="highlight shell tab-shell"><code>https://<span class="o">{</span>Partner Authorization URL<span class="o">}</span>?client_id<span class="o">=</span>demo-client&amp;redirect_uri<span class="o">=</span>http%3A%2F%2Flocalhost%3A3000%2Fcallback&amp;response_type<span class="o">=</span>code&amp;scope<span class="o">=</span>basic+email&amp;state<span class="o">=</span>pnIj1g3GMsX0Rj6FDbVoe3rYbLJzdfejT0EfusiEbis%3D
</code></pre></div>
<p><strong>Callback Redirect should include following Parameters：</strong></p>

<table><thead>
<tr>
<th style="text-align: left"><strong>Parameter name</strong></th>
<th style="text-align: left"><strong>Explanation</strong></th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">code</td>
<td style="text-align: left">A code generated for the authentication request by Cabital. The Relying party must treat this code as an opaque value</td>
</tr>
<tr>
<td style="text-align: left">state</td>
<td style="text-align: left">The value of the state parameter</td>
</tr>
</tbody></table>
<div class="highlight"><pre class="highlight shell tab-shell"><code>https://<span class="o">{</span>Partner Callback URL<span class="o">}</span>/callback?state<span class="o">=</span>57a30714-91e5-4fd7-a917-a4c5c8563e24&amp;code<span class="o">=</span>642de989-2564-405a-a807-5a8d20952e09.57a30714-91e5-4fd7-a917-a4c5c8563e24.d3e0888f-61b1-4d42-b971-156397ba24b5
</code></pre></div><h3 id='2-2-access-token'>2.2 Access token</h3>
<p>Partner send authentication code to cabital to exchange auth token.</p>

<p><strong>Request URL</strong></p>
<div class="highlight"><pre class="highlight shell tab-shell"><code>https://<span class="o">{</span>Token URL<span class="o">}</span>
</code></pre></div>
<p><strong>Basic authentication</strong></p>

<p>The Relying party must authenticate itself using Basic authentication.  Reference: OAuth2 appendix A.2(https://tools.ietf.org/html/rfc6749#appendix-A.2).</p>

<p><strong>HTTP Method</strong></p>

<ul>
<li> POST: the parameters are sent in the body of a request with <code>Content-Type: application/x-www-form-urlencoded</code>. </li>
</ul>

<p><strong>Primary Parameters：</strong></p>

<table><thead>
<tr>
<th style="text-align: left"><strong>Parameter name</strong></th>
<th style="text-align: left"><strong>Explanation</strong></th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">grant_type</td>
<td style="text-align: left">The expected grant type. Must be the fixed value: authorization_code</td>
</tr>
<tr>
<td style="text-align: left">code</td>
<td style="text-align: left">The code as received from Cabital in the Authentication response.</td>
</tr>
<tr>
<td style="text-align: left">redirect_uri</td>
<td style="text-align: left">URI to send the authorization response back to. Must be the one that is registered in Cabital with the Relying Party</td>
</tr>
</tbody></table>

<p><strong>Error Code:</strong> </p>

<table><thead>
<tr>
<th>HTTP Satus Code</th>
<th style="text-align: left">Check</th>
<th>Reponse        Code</th>
<th style="text-align: left">Reponse Message</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td style="text-align: left">The basic authentication must be valid</td>
<td>001201</td>
<td style="text-align: left">unauthorized_client</td>
</tr>
<tr>
<td>400</td>
<td style="text-align: left">The response_type parameter must be “authorization_code”.</td>
<td>001201</td>
<td style="text-align: left">unsupported_grant_type</td>
</tr>
<tr>
<td>400</td>
<td style="text-align: left">The code must be known to Cabital and must have been generated for the Service identified by the basic authentication username.</td>
<td>001201</td>
<td style="text-align: left">invalid_request</td>
</tr>
<tr>
<td>400</td>
<td style="text-align: left">The redirect_uri must be known to Cabital for the Service.</td>
<td>001201</td>
<td style="text-align: left">invalid_request</td>
</tr>
</tbody></table>

<p>If the request was processed successfully, it will return a JSON object.</p>

<p><strong>Json Object Fields：</strong></p>

<table><thead>
<tr>
<th style="text-align: left"><strong>Attribute name</strong></th>
<th style="text-align: left"><strong>Explanation</strong></th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">access_token</td>
<td style="text-align: left">Token needed for sending a UserInfo request. The token is generated by Cabital.</td>
</tr>
<tr>
<td style="text-align: left">token_type</td>
<td style="text-align: left">The authorization type the token has been generated for, must be the fixed value: Bearer</td>
</tr>
<tr>
<td style="text-align: left">expires_in</td>
<td style="text-align: left">Validity period of the <code>access_token</code>, in seconds</td>
</tr>
<tr>
<td style="text-align: left">id_token</td>
<td style="text-align: left">JSON Web Token with information about the authenticated end user and the request.</td>
</tr>
<tr>
<td style="text-align: left">refresh_token</td>
<td style="text-align: left">Refresh token.</td>
</tr>
</tbody></table>

<p>id_token includes header, signature and payload which includes following important field:</p>

<table><thead>
<tr>
<th style="text-align: left"><strong>Attribute name</strong></th>
<th style="text-align: left"><strong>Explanation</strong></th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">account_id</td>
<td style="text-align: left">The user identifier within Cabital,  user ID.</td>
</tr>
<tr>
<td style="text-align: left">mail</td>
<td style="text-align: left">Email address of the user.</td>
</tr>
<tr>
<td style="text-align: left">kyc_token</td>
<td style="text-align: left">KYC token.</td>
</tr>
</tbody></table>

<p>Example：</p>
<div class="highlight"><pre class="highlight shell tab-shell"><code><span class="o">{</span>
    <span class="s2">"account_id"</span>:<span class="s2">"2cdcae60-a52c-40cd-9489-0c7b4771cc1a"</span>,
    <span class="s2">"kyc_token"</span>:<span class="s2">"xxxxxxx"</span>,
    <span class="s2">"email"</span>:<span class="s2">"karay.hua@cabital.com"</span>
<span class="o">}</span>
</code></pre></div><h3 id='2-3-userinfo-optional'>2.3 UserInfo (Optional)</h3>
<p>Partner token api return the unique identification of user by <code>sub</code> field. Otherwise, Cabital will use the token to fetch userinfo, which will provide user basic information.</p>

<p><strong>HTTP Method</strong></p>

<ul>
<li> GET: in that case, the parameters are URL encoded in the query string.</li>
</ul>

<p><strong>Request URL</strong></p>
<div class="highlight"><pre class="highlight shell tab-shell"><code>https://<span class="o">{</span>User Info URL<span class="o">}</span>
</code></pre></div>
<p><strong>Parameters：</strong></p>

<p>The request will come with an <code>Authorization</code> header with the value <code>Bearer</code> and <code>access_token</code> is taken from the Access Token response.</p>

<p><strong>Common Error</strong></p>

<table><thead>
<tr>
<th>HTTP Satus Code</th>
<th style="text-align: left">Check</th>
<th>Reponse        Code</th>
<th style="text-align: left">Reponse Message</th>
</tr>
</thead><tbody>
<tr>
<td>403</td>
<td style="text-align: left">The authentication must be valid, unauthorized token</td>
<td></td>
<td style="text-align: left"></td>
</tr>
</tbody></table>

<p><strong>JSON fields</strong></p>

<table><thead>
<tr>
<th style="text-align: left"><strong>Attribute name</strong></th>
<th style="text-align: left"><strong>Explanation</strong></th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">account_id</td>
<td style="text-align: left">The user identifier within Cabital,  user ID.</td>
</tr>
<tr>
<td style="text-align: left">mail</td>
<td style="text-align: left">Email address of the user.</td>
</tr>
<tr>
<td style="text-align: left">kyc_token</td>
<td style="text-align: left">KYC token.</td>
</tr>
</tbody></table>
<h3 id='2-4-refresh-token-optional'>2.4 Refresh token (Optional)</h3>
<p>Cabital will refresh token in case token expired.</p>

<p><strong>HTTP Method</strong></p>

<ul>
<li> POST: the parameters are sent in the body of a request with <code>Content-Type: application/x-www-form-urlencoded</code>.</li>
</ul>

<p><strong>Request URL</strong></p>
<div class="highlight"><pre class="highlight shell tab-shell"><code>https://<span class="o">{</span>Token URL<span class="o">}</span>
</code></pre></div>
<p><strong>Parameters：</strong></p>

<table><thead>
<tr>
<th style="text-align: left"><strong>Parameter</strong></th>
<th style="text-align: left"><strong>Description</strong></th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">grant_type</td>
<td style="text-align: left">The expected grant type. Must be the fixed value: <code>refresh_token</code></td>
</tr>
<tr>
<td style="text-align: left">refresh_token</td>
<td style="text-align: left">The refresh token as received from Cabital.</td>
</tr>
</tbody></table>

<p>Response please same as <strong>Access token</strong> interface.</p>

<p><strong>Token Life Suggestion：</strong></p>

<table><thead>
<tr>
<th style="text-align: left"></th>
<th style="text-align: left"><strong>Access Token</strong></th>
<th style="text-align: left"><strong>Refresh Token</strong></th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">Expires</td>
<td style="text-align: left">Default 3600 seconds (1 hour).</td>
<td style="text-align: left">Default 86400 seconds (24 hours / 1 day).</td>
</tr>
</tbody></table>

<p>If user changed password or status abnormal，refresh token will be revoked immediately, have to authenticate again.</p>
<h2 id='3-resources'>3. Resources</h2>
<ul>
<li><p><a href="https://openid.net/connect/">OpenID Connect</a></p></li>
<li><p><a href="https://openid.net/specs/openid-connect-core-1_0.html">OpenID Connect Core 1.0 incorporating errata set 1</a></p></li>
<li><p><a href="https://tools.ietf.org/html/rfc7636">Proof Key for Code Exchange by OAuth Public Clients</a></p></li>
<li><p><a href="https://tools.ietf.org/html/draft-ietf-oauth-token-exchange-19">OAuth 2.0 Token Exchange</a></p></li>
<li><p><a href="https://tools.ietf.org/html/draft-ietf-oauth-mtls-17">OAuth 2.0 Mutual-TLS Client Authentication and Certificate-Bound Access Tokens</a></p></li>
<li><p><a href="https://tools.ietf.org/html/rfc7523">JSON Web Token (JWT) Profile for OAuth 2.0 Client Authentication and Authorization Grants</a></p></li>
</ul>
<h1 id='authentication'>Authentication</h1>
<p>API Key / Secret is the credential to access Connect API. All the HTTPS calls need to be signed and include following HTTP Headers:</p>

<ul>
<li>ACCESS-KEY: Customer Access Key, provided by Cabital</li>
<li>ACCESS-SIGN: The signature build by the algorithm described below. </li>
<li>ACCESS-TIMESTAMP: API Access time stamp</li>
<li>ACCESS-NONCE: We use nonces to ensure that old communications cannot be reused. Each API call must used different nounce, otherwise, system will ignore the 2nd request arrived within 60 mins time frame.</li>
</ul>

<p>API Request must include <code>Content-Type</code> as <code>application/json</code> and the body must be in restricted JSON format.</p>

<p>ACCESS-SIGN Header is the sha256 HMAC hash by <code>time stamp + HTTP method + NONCE + access path + request body</code> with Secret Key.</p>

<ul>
<li>The timestamp should be the same as ACCESS-TIMESTAMP. </li>
<li>The request body is in the form of String, or regarded as empty, especially when accessing the API through GET</li>
<li>HTTP method must be uppercase, i.e. <code>GET</code> or <code>POST</code></li>
</ul>

<p>ACCESS-TIMESTAMP is from the Unix Epoch to the current number in seconds. The timestamp of the customer request must be within 30 seconds of the API service time, otherwise it will be considered expired or rejected directly.</p>

<aside class="warning">
Please do not share your Secret. Otherwise, it may cause information leakage and an unnecessary loss of transaction fees. If your Secret is leaked, please contact your service consultant immediately.
</aside>
<h1 id='partner-level-api'>Partner Level API</h1>
<p>The partner system API is provided to the partner to perceive the status of cooperative account opening, system basic settings, and non-user level settings.</p>
<h2 id='partner-configuration'>Partner Configuration</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://partner.cabital.com/api/v1/config"</span>
</code></pre></div><h3 id='http-request'>HTTP Request</h3>
<p><code>GET /api/v1/config</code></p>

<blockquote>
<p>Response Sample:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"currencies"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
            </span><span class="nl">"deposit_methods"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"ERC20"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="nl">"withdraw_methods"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"ERC20"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="nl">"config"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"credit"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"allow"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"min"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-1"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"max"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-1"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"debit"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"allow"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"min"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.02"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"max"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-1"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"conversion"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"allow"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"min"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.002"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"max"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100"</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"fees"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"debit_fee"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"is_single"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"object"</span><span class="p">:</span><span class="w"> </span><span class="s2">"customer"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fixed"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.00025"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"original_value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.001"</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
            </span><span class="nl">"deposit_methods"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"BTC"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="nl">"withdraw_methods"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"BTC"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="nl">"config"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"credit"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"allow"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"min"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-1"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"max"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-1"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"debit"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"allow"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"min"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.001"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"max"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-1"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"conversion"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"allow"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"min"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0002"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"max"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5"</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"fees"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"debit_fee"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"is_single"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"object"</span><span class="p">:</span><span class="w"> </span><span class="s2">"customer"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fixed"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.00002"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"original_value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0001"</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
            </span><span class="nl">"deposit_methods"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"ERC20"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="nl">"withdraw_methods"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"ERC20"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="nl">"config"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"credit"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"allow"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"min"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-1"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"max"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-1"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"debit"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"allow"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"min"</span><span class="p">:</span><span class="w"> </span><span class="s2">"40"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"max"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-1"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"conversion"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"allow"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"min"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"max"</span><span class="p">:</span><span class="w"> </span><span class="s2">"200000"</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"fees"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"debit_fee"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"is_single"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"object"</span><span class="p">:</span><span class="w"> </span><span class="s2">"customer"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fixed"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.99"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"original_value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10"</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EUR"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="nl">"deposit_methods"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"SEPA"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="nl">"withdraw_methods"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"SEPA"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="nl">"config"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"credit"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"allow"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"min"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-1"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"max"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-1"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"debit"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"allow"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"min"</span><span class="p">:</span><span class="w"> </span><span class="s2">"25"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"max"</span><span class="p">:</span><span class="w"> </span><span class="s2">"50000"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"conversion"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"allow"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"min"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"max"</span><span class="p">:</span><span class="w"> </span><span class="s2">"200000"</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GBP"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="nl">"deposit_methods"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"FPS"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="nl">"withdraw_methods"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"FPS"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="nl">"config"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"credit"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"allow"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"min"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-1"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"max"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-1"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"debit"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"allow"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"min"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"max"</span><span class="p">:</span><span class="w"> </span><span class="s2">"40000"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"conversion"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"allow"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"min"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"max"</span><span class="p">:</span><span class="w"> </span><span class="s2">"200000"</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"pairs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"pair"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-EUR"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"pair"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH-EUR"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"pair"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EUR-USDT"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"pair"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-GBP"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"pair"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH-GBP"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"pair"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GBP-USDT"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"pair"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-ETH"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"pair"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-USDT"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"pair"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH-USDT"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='basic-elements'>Basic Elements</h3>
<ul>
<li>currencies : all currencies available for the connect partners with configuration</li>
<li>pairs: exchange pairs for quotes.</li>
</ul>
<h3 id='currency-object-definition'>Currency Object Definition</h3>
<ul>
<li>Each Currency object elements</li>
</ul>

<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>symobl</td>
<td>string(ENUM)</td>
<td>currency symbol</td>
</tr>
<tr>
<td>type</td>
<td>int(ENUM)</td>
<td>currency type, see the explanation below for details</td>
</tr>
<tr>
<td>deposit_methods</td>
<td>list</td>
<td>Current deposit methods</td>
</tr>
<tr>
<td>withdraw_methods</td>
<td>list</td>
<td>Current withdrawal method</td>
</tr>
<tr>
<td>config</td>
<td>list(object)</td>
<td>restrictions and configuration of the currency</td>
</tr>
<tr>
<td>conversions</td>
<td>list(object)</td>
<td>restrictions and configuration of currency pair</td>
</tr>
<tr>
<td>Fees</td>
<td>list(object)</td>
<td>Fee configuration</td>
</tr>
</tbody></table>

<ul>
<li>credit/debit object definition</li>
</ul>

<table><thead>
<tr>
<th style="text-align: left">Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">allow</td>
<td>bool</td>
<td>the pair does allow</td>
</tr>
<tr>
<td style="text-align: left">min</td>
<td>string(number)</td>
<td>minimum amount per transaction，<code>-1</code> means unlimited</td>
</tr>
<tr>
<td style="text-align: left">max</td>
<td>string(number)</td>
<td>maximum amount per transaction，<code>-1</code> means unlimited</td>
</tr>
</tbody></table>

<ul>
<li>conversion object definition</li>
</ul>

<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>allow</td>
<td>bool</td>
<td>availability of the currency (killer switch)</td>
</tr>
<tr>
<td>min</td>
<td>string(number)</td>
<td>minimum amount per transaction</td>
</tr>
<tr>
<td>max</td>
<td>string(number)</td>
<td>maximum amount per transaction</td>
</tr>
</tbody></table>

<ul>
<li>debit_fee object definition</li>
</ul>

<table><thead>
<tr>
<th style="text-align: left">Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">object</td>
<td>sting</td>
<td>Charge Subject: <code>Customer</code> / <code>Partner</code></td>
</tr>
<tr>
<td style="text-align: left">is_single</td>
<td>bool</td>
<td>Charge Modal <code>Single</code> or <code>Tier</code></td>
</tr>
<tr>
<td style="text-align: left">method</td>
<td>string</td>
<td>Calculation method：Fixed or Percent</td>
</tr>
<tr>
<td style="text-align: left">value</td>
<td>string</td>
<td>Fixed : fee amount / Percent : percentage</td>
</tr>
<tr>
<td style="text-align: left">original_value</td>
<td>string</td>
<td>(For Display) Fixed : fee amount / Percent : percentage</td>
</tr>
<tr>
<td style="text-align: left">min_value</td>
<td>string</td>
<td>min fee amount</td>
</tr>
<tr>
<td style="text-align: left">original_min_value</td>
<td>string</td>
<td>min fee amount for display in case the method is <code>Percent</code></td>
</tr>
<tr>
<td style="text-align: left">max_value</td>
<td>string</td>
<td>max fee amount</td>
</tr>
<tr>
<td style="text-align: left">original_max_value</td>
<td>string</td>
<td>max fee amount for display in case the method is <code>Percent</code></td>
</tr>
</tbody></table>
<h3 id='enum'>Enum</h3>
<ul>
<li>Currency type</li>
</ul>

<table><thead>
<tr>
<th>Value</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>FIAT</td>
</tr>
<tr>
<td>2</td>
<td>Crypto Currency</td>
</tr>
</tbody></table>

<aside class="success">
The limit is for the entire partner, limit of a single transaction
</aside>
<h2 id='get-the-latest-quotation-get'>Get the Latest Quotation (GET)</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"http://partner.cabital.com/api/v1/quotes/USDT-EUR"</span>
</code></pre></div><h3 id='http-request-2'>HTTP Request</h3>
<p><code>GET /api/v1/quotes/&lt;code_pair&gt;</code></p>
<h3 id='url-parameters'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>code_pair</td>
<td>true</td>
<td>The code_pair parameter uses <code>-</code> as the separator. The Cabital system will ignore the incoming order and sort according to its own rules. Therefore, a currency pair will always return the quotes in the same code pair order regardless of the incoming order and the buying and selling relationship, i.e. fetch <code>USDT-EUR</code> or <code>EUR-USDT</code> will return quotes in <code>USDT-EUR</code> pair.</td>
</tr>
</tbody></table>

<blockquote>
<p>Response Sample</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"quote"</span><span class="p">:</span><span class="w"> </span><span class="s2">"37112.64"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"valid_until"</span><span class="p">:</span><span class="w"> </span><span class="mi">1645113784</span><span class="p">,</span><span class="w">
    </span><span class="nl">"quote_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20220217160254:BTC-EUR:Customer"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"valid_interval"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
    </span><span class="nl">"reversed_quote"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.00002724"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='response-object'>Response Object</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>quote</td>
<td>string(number)</td>
<td>Sell <em>Left Code</em> in exchange for <em>Right Code</em> price</td>
</tr>
<tr>
<td>valid_until</td>
<td>number(timestamp)</td>
<td>The number in seconds from the Unix Epoch to the current, used to indicate the effective time of the quote</td>
</tr>
<tr>
<td>quote_id</td>
<td>string</td>
<td>The unique ID of the quotation, the format is [timestamp:quotation currency pair: quotation purpose]</td>
</tr>
<tr>
<td>valid_interval</td>
<td>number</td>
<td>The effective time duration of the quotation, in seconds</td>
</tr>
<tr>
<td>reversed_quote</td>
<td>string(number)</td>
<td>Sell <em>Right Code</em> in exchange for <em>Left Code</em> quotation</td>
</tr>
</tbody></table>

<aside class="success">
The symbol of FIAT is based on <a href="https://en.wikipedia.org/wiki/ISO_4217">ISO-4217</a>, and the crypto currency is based on <a href="https://coinmarketcap.com/ all/views/all/">CoinMarketCap</a> list
</aside>
<h2 id='reconciliation'>Reconciliation</h2>
<p>Connect provides reconciliation interface to help partner to query transfer by external id.</p>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"/api/v1/recon/transfers/adb8f31d-7a71-4003-85d7-3ac58158461f"</span>
</code></pre></div>
<blockquote>
<p>Response Sample:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"instruction_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3a344f80-f057-4841-b186-7a1daa0b8390"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"account_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6d92e7b4-715c-4ce3-a028-19f1c8c9fa6c"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"transfer_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4c416854-8970-4838-99ad-febc437ac81d"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"instructed_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1002.865"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"customer_fee"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.5"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"actual_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1000.365"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEBIT"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"conversion_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d81adf6d-0322-41d7-8c32-669203e35f11"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"external_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"adb8f31d-7a71-4003-85d7-3ac58158461f"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUCCESS"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1633445162</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='http-request-3'>HTTP Request</h3>
<p><code>GET /api/v1/recon/transfers/&lt;external_id&gt;</code></p>
<h3 id='url-parameters-2'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>external_id</td>
<td>true</td>
<td>Partner External ID</td>
</tr>
</tbody></table>
<h3 id='response-object-2'>Response Object</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transfer_id</td>
<td>string(uuid)</td>
<td>Transfer order id</td>
</tr>
<tr>
<td>instructed_amount</td>
<td>string(number)</td>
<td>Instructed Amount</td>
</tr>
<tr>
<td>customer_fee</td>
<td>string(number)</td>
<td>Fee charged to customer</td>
</tr>
<tr>
<td>actual_amount</td>
<td>string(number)</td>
<td>Customer actually received</td>
</tr>
<tr>
<td>symbol</td>
<td>string</td>
<td>Currency symbol</td>
</tr>
<tr>
<td>direction</td>
<td>string(enum)</td>
<td>The direction of the transfer to Cabital. <code>CREDIT</code> for top up into the Cabital Account. <code>DEBIT</code> for withdraw out of the Cabital Account.</td>
</tr>
<tr>
<td>conversion_id</td>
<td>string(uuid)</td>
<td>The conversion order ID in C+T related transactions, optional</td>
</tr>
<tr>
<td>external_id</td>
<td>string(50)</td>
<td>The third-party ID of the partner, optional, but have to be unique to individual transfer.</td>
</tr>
<tr>
<td>status</td>
<td>string(enum)</td>
<td>The result of the transfer (<code>SUCCESS</code> / <code>FAILED</code> / <code>PROCESSING</code>)</td>
</tr>
<tr>
<td>created_at</td>
<td>timestamp(number)</td>
<td>Created timestamp</td>
</tr>
</tbody></table>
<h1 id='account-connect'>Account Connect</h1>
<p>Cabital Connect is subject to regulatory requirements. The access partner must provide the identity information (each field) consistent with this party. For field descriptions, please refer to the API for linking accounts with the same name.</p>
<h2 id='get-user-connection-status'>Get User Connection Status</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"http://partner.cabital.com/api/v1/accounts/cdaa9983-9b8f-4478-ba60-896ac239879d/detail"</span>
</code></pre></div><h3 id='http-request'>HTTP Request</h3>
<p><code>GET /api/v1/accounts/&lt;account_id&gt;/detail</code></p>
<h3 id='url-parameters'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>account_id</td>
<td>true</td>
<td>Cabital Connect Account Id</td>
</tr>
</tbody></table>

<blockquote>
<p>Response Sample:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"match_status"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"MATCHED"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"otp_ready"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"email_address"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"john.doe@email.com"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"kyc_token"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"8yzhvhv87dahfb"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"limits"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>account_status</td>
<td>string(ENUM)</td>
<td>Status, see the definition in Events</td>
</tr>
<tr>
<td>otp_ready</td>
<td>bool</td>
<td>Whether the customer has completed the OTP binding in Cabital, it needs to be attached when withdrawing.</td>
</tr>
<tr>
<td>email_address</td>
<td>string</td>
<td>The user’s Email for the partner to match</td>
</tr>
<tr>
<td>ext_id</td>
<td>string</td>
<td>Optional, 3rd Party uuid</td>
</tr>
<tr>
<td>kyc_token</td>
<td>string</td>
<td>Optional, The user&#39;s KYC Token for the partner to apply</td>
</tr>
<tr>
<td>limits</td>
<td>object</td>
<td>Current payment limit</td>
</tr>
</tbody></table>

<aside class="success">
Single account limit
</aside>
<h2 id='name-match'>Name Match</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"/api/v1/accounts/cdaa9983-9b8f-4478-ba60-896ac239879d/match"</span> <span class="se">\</span>
  <span class="nt">-X</span> <span class="s2">"PUT"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{ "name": "John Doe", "id": "J12345678D", "id_document": "PASSPORT", "dob": "19700101", "issued_by": "HKG" }'</span> 
</code></pre></div><h3 id='http-request-2'>HTTP Request</h3>
<p><code>PUT /api/v1/accounts/&lt;account_id&gt;/match</code></p>
<h3 id='url-parameters-2'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>account_id</td>
<td>true</td>
<td>Cabital Connect Account Id</td>
</tr>
</tbody></table>
<h3 id='request-body'>Request Body</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>string</td>
<td>The full name of the customer, in accordance with the usual order on the document, such as First Name + (Middle Name) + Last Name</td>
</tr>
<tr>
<td>id</td>
<td>string</td>
<td>ID on the identity document</td>
</tr>
<tr>
<td>id_document</td>
<td>string(ENUM)</td>
<td>Identity document type (<code>ID,PASSPORT,DRIVER_LICENSE</code>)</td>
</tr>
<tr>
<td>issued_by</td>
<td>string</td>
<td>The country where the identity document was issued, country code should follow <a href="https://en.wikipedia.org/wiki/ISO_3166-1_alpha-3#Officially_assigned_code_elements">ISO_3166-1_alpha-3</a></td>
</tr>
<tr>
<td>dob</td>
<td>string</td>
<td>Date of birth format in <code>YYYYMMDD</code></td>
</tr>
</tbody></table>

<blockquote>
<p>Sample Response:
result field type is string(ENUM)，value is one of <code>MISMATCH</code>,<code>PASS</code>,<code>PENDING</code></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MISMATCH"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"mismatch_fields"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"dob"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Submit user information to get the verification result of the same name control.</p>
<h3 id='error-message'>Error Message</h3>
<ul>
<li>HTTP 400 : Connection Status must be in CREATED or MISMATCHED</li>
</ul>
<h1 id='account-operations'>Account Operations</h1><h2 id='list-of-account-operation-business-errors'>List of Account Operation Business Errors</h2>
<table><thead>
<tr>
<th>Error</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>PA001</td>
<td>Cabital account id does not exist</td>
</tr>
<tr>
<td>PA002</td>
<td>Insufficient account available balance</td>
</tr>
<tr>
<td>PA003</td>
<td>The transaction has not reached the minimum limit</td>
</tr>
<tr>
<td>PA004</td>
<td>The transaction exceeds the maximum limit</td>
</tr>
<tr>
<td>PA005</td>
<td>The requested transaction type is not available</td>
</tr>
<tr>
<td>PA006</td>
<td>The currency of the requested transaction request is not available</td>
</tr>
<tr>
<td>PA007</td>
<td>Quote has been expired</td>
</tr>
<tr>
<td>PA008</td>
<td>Incorrect 2FA (OTP)</td>
</tr>
<tr>
<td>PA009</td>
<td>The customer’s KYC status has not yet been matched</td>
</tr>
<tr>
<td>PA010</td>
<td>2FA (OTP) is not set properly</td>
</tr>
<tr>
<td>PA011</td>
<td>Convert&#39;s Quote usage is incorrect (Invalid Calculation)</td>
</tr>
<tr>
<td>PA012</td>
<td>The customer doesn&#39;t pass Cabital&#39;s KYC</td>
</tr>
<tr>
<td>PA013</td>
<td>The customer is in <code>UNLINKED</code> status</td>
</tr>
<tr>
<td>PA014</td>
<td>Illegal payment method.</td>
</tr>
<tr>
<td>PA015</td>
<td>Invalid Symbol</td>
</tr>
<tr>
<td>PA016</td>
<td>Invalid id document</td>
</tr>
<tr>
<td>PA017</td>
<td>Invalid country code</td>
</tr>
<tr>
<td>PA018</td>
<td>Unsupported pair</td>
</tr>
<tr>
<td>PA019</td>
<td>Unsupported quote</td>
</tr>
<tr>
<td>PA020</td>
<td>Exceed account limits.</td>
</tr>
<tr>
<td>PA021</td>
<td>Wrong configuration</td>
</tr>
<tr>
<td>PA022</td>
<td>Invalid IBAN</td>
</tr>
<tr>
<td>PA023</td>
<td>Invalid Names（kyc match）</td>
</tr>
<tr>
<td>PA024</td>
<td>Invalid ID Number（kyc match）</td>
</tr>
<tr>
<td>PA025</td>
<td>Invalid Day of Birth（kyc match）</td>
</tr>
<tr>
<td>PA026</td>
<td>Redundent KYC match Information (System disalow post matching request when the matching status is in <code>MATCHED</code>）</td>
</tr>
<tr>
<td>PA027</td>
<td>Invalid transfer direction（Only supports：<code>CREDIT</code>，<code>DEBIT</code>）</td>
</tr>
<tr>
<td>PA028</td>
<td>Invalid transfer amount</td>
</tr>
<tr>
<td>PA029</td>
<td>Redundent transfer request (any of external_id, conversion_id must be unique）</td>
</tr>
<tr>
<td>PA030</td>
<td>The transfer order doesn&#39;t not exist. (In recon/transfers query interface)</td>
</tr>
<tr>
<td>PA031</td>
<td>In a C + T order, fail to valid the corresponding conversion.</td>
</tr>
<tr>
<td>PA032</td>
<td>In a C + T order, transfer amont is larger than the recieved amount from the corresponding conversion.</td>
</tr>
<tr>
<td>PA999</td>
<td>Internal services error, please retry.</td>
</tr>
</tbody></table>
<h2 id='supported-currency-decimal-table'>Supported Currency Decimal Table</h2>
<table><thead>
<tr>
<th>Code</th>
<th>Crypto Currency</th>
<th>Percision</th>
<th>Comments &amp; Example</th>
</tr>
</thead><tbody>
<tr>
<td>BTC</td>
<td>Yes</td>
<td>8</td>
<td><code>1.00000000</code></td>
</tr>
<tr>
<td>ETH</td>
<td>Yes</td>
<td>8</td>
<td><code>1.00000000</code></td>
</tr>
<tr>
<td>USDT</td>
<td>Yes</td>
<td>6</td>
<td><code>1010.000000</code></td>
</tr>
<tr>
<td>EUR</td>
<td>No</td>
<td>2</td>
<td><code>1000.00</code></td>
</tr>
<tr>
<td>GBP</td>
<td>No</td>
<td>2</td>
<td><code>1000.00</code></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>

<!-- ## 获取用户提现限额


```shell
curl "https://partner.cabital.com/api/v1/limit" \
  -H "Authorization: Bearer"
```

### HTTP 请求

`GET /api/v1/limit`


> Response Sample:

```json
[
  {
    "id": 1,
    "name": "Fluffums",
    "breed": "calico",
    "fluffiness": 6,
    "cuteness": 7
  },
  {
    "id": 2,
    "name": "Max",
    "breed": "unknown",
    "fluffiness": 5,
    "cuteness": 10
  }
]
```
<aside class="success">
用户级别的限额
</aside>

获取该账户的提款限额（根据账户的AML规则）



> Response Sample:

```json
[
  {
    "code": "BTC",
    "balances": "1",
    "allow_debit": true,
    "allow_credit": true
  },
  {
    "code": "ETH",
    "balances": "1",
    "allow_debit": true,
    "allow_credit": true
  },
  {
    "code": "USDT",
    "balances": "1",
    "allow_debit": true,
    "allow_credit": true
  },
  {
    "code": "EUR",
    "balances": "1",
    "allow_debit": false,
    "allow_credit": false
  },
  {
    "code": "GBP",
    "balances": "1.0",
    "allow_debit": false,
    "allow_credit": false
  }
]
```

获取用户的所有账户余额

### HTTP Request

`GET /api/v1/accounts/<account_id>/balances`

### URL Parameters

Parameter | Default | Description
--------- | ------- | -----------
account_id | true | Cabital Connect Account Id -->
<h2 id='list-of-available-account-balances'>List of Available Account Balances</h2>
<p>Get all account balances of the user</p>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"/api/v1/accounts/{account_id}/balances"</span>
</code></pre></div>
<blockquote>
<p>Response Sample:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"balances"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"balances"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.00000000"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"balances"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.00000000"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EUR"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"balances"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1000.00"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GBP"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"balances"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1000.00"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"balances"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1010.000000"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='http-request'>HTTP Request</h3>
<p><code>GET /api/v1/accounts/&lt;account_id&gt;/balances</code></p>
<h3 id='url-parameters'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>account_id</td>
<td>true</td>
<td>Cabital Connect Account Id</td>
</tr>
</tbody></table>
<h2 id='available-account-balance-in-a-single-currency'>Available Account Balance in a Single Currency</h2>
<p>Get the user&#39;s single account balance, please refer to the currency symbol <a href="/connect/en/#get-the-latest-quotation-get">Quotation API</a></p>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"/api/v1/accounts/6d92e7b4-715c-4ce3-a028-19f1c8c9fa6c/balances/BTC"</span>
</code></pre></div>
<blockquote>
<p>Response Sample:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"balances"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.12345678"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='http-request-2'>HTTP Request</h3>
<p><code>GET /api/v1/accounts/&lt;account_id&gt;/balances/&lt;symbol&gt;</code></p>
<h3 id='url-parameters-2'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>account_id</td>
<td>true</td>
<td>Cabital Connect Account Id</td>
</tr>
<tr>
<td>symbol</td>
<td>true</td>
<td>Currency Symbol</td>
</tr>
</tbody></table>
<h2 id='account-currency-deposite-information'>Account Currency Deposite Information</h2>
<p>Get account currency deposite information</p>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"/api/v1/accounts/6d92e7b4-715c-4ce3-a028-19f1c8c9fa6c/balances/EUR/deposit/SEPA"</span> 
</code></pre></div>
<p>Or</p>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"/api/v1/accounts/6d92e7b4-715c-4ce3-a028-19f1c8c9fa6c/balances/GBP/deposit/FPS"</span>
</code></pre></div>
<blockquote>
<p>Response Sample:
<code>json
{
    &quot;symbol&quot;: &quot;EUR&quot;,
    &quot;method&quot;: &quot;SEPA&quot;,
    &quot;meta&quot;: {
        &quot;account_name&quot;: &quot;Cabital Fintech (LT) UAB&quot;,
        &quot;iban&quot;: &quot;CH1808799927511379814&quot;,
        &quot;ref_code&quot;: &quot;8TCTP5&quot;,
        &quot;bic&quot;: &quot;INCOCHZZXXX&quot;,
        &quot;bank_name&quot;: &quot;InCore Bank AG&quot;,
        &quot;bank_address&quot;: &quot;Wiesenstrasse 17&quot;,
        &quot;bank_country&quot;: &quot;Switzerland&quot;
    }
}
</code>
Or</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GBP"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FPS"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"account_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cabital Fintech (LT) UAB"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"ref_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8TCTP5"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"account_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00003157"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"sort_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"040541"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"bank_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BCB Payments Ltd"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"bank_address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5 Merchant Square London"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"bank_country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"United Kingdom"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='http-request-3'>HTTP Request</h3>
<p><code>GET /api/v1/accounts/&lt;account_id&gt;/balances/&lt;symbol&gt;/deposit/&lt;method&gt;</code></p>
<h3 id='url-parameters-3'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>account_id</td>
<td>true</td>
<td>Cabital Connect Account Id</td>
</tr>
<tr>
<td>symbol</td>
<td>true</td>
<td>Currency symbol, follow the supporting Fiat currency from partner setting</td>
</tr>
<tr>
<td>method</td>
<td>false</td>
<td>The deposit method currency is not required. If missing, the default method will be used. Please use the method defined in<a href="/?shell#79fee25901">Configuration API</a></td>
</tr>
</tbody></table>
<h2 id='currency-conversion'>Currency Conversion</h2>
<p>Through the method of conversion between Cabital&#39;s account balances, exchange different currencies. By converting currencies, you can trade currencies that Cabital does not support transfer by converting first and then transferring (C+T)</p>

<p>You can exchange different currencies. By converting currencies, you can also trade currencies that Cabital does not support by converting them first to a supporting currency and then transferring (convert and then transfer).</p>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="s2">"/api/v1/accounts/6d92e7b4-715c-4ce3-a028-19f1c8c9fa6c/conversions"</span>
<span class="nt">-d</span> <span class="s1">'{
    "quote_id": "20210416225049:BTC-USDT:Customer",
    "quote": "61426.365",
    "pair": "BTC-USDT",
    "buy_amount": "0.001",
    "sell_amount": "61.426365",
    "major_ccy": "BTC"
}'</span>
</code></pre></div>
<blockquote>
<p>Request Sample:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"quote_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20210416225049:BTC-USDT:Customer"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"quote"</span><span class="p">:</span><span class="w"> </span><span class="s2">"61426.365"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"pair"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-USDT"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"buy_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.001"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"sell_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"61.426365"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"major_ccy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Response Sample:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"transaction_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d81adf6d-0322-41d7-8c32-669203e35f11"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUCCESS"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='http-request-4'>HTTP Request</h3>
<p><code>POST /api/v1/accounts/&lt;account_id&gt;/conversions</code></p>
<h3 id='url-parameters-4'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>account_id</td>
<td>true</td>
<td>Cabital Connect Account Id</td>
</tr>
</tbody></table>
<h3 id='request-object'>Request Object</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>quote_id</td>
<td>string</td>
<td>The unique identifier of the quote</td>
</tr>
<tr>
<td>quote</td>
<td>string(number)</td>
<td>Quote</td>
</tr>
<tr>
<td>pair</td>
<td>string</td>
<td>The currency pair that is to be quoted. The left side repesents what is being bought. The right side represents what is being sold.</td>
</tr>
<tr>
<td>buy_amount</td>
<td>string(number)</td>
<td>Buy amount</td>
</tr>
<tr>
<td>sell_amount</td>
<td>string(number)</td>
<td>Sell amount</td>
</tr>
<tr>
<td>major_ccy</td>
<td>string</td>
<td>Major currency, used to determine the conversion limits</td>
</tr>
</tbody></table>

<aside class="warning">
<b>Attention：</b>
<ul>
  <li>Be sure to pay attention to the direction of the pair. The left side repesents what is being bought. The right side represents what is being sold. </li>
  <li>Because the quotation supports Ask & Bid, no matter if you are buying or selling, it will be the same quotation pair. </li>
</ul>
</aside>
<h2 id='account-transfer-history'>Account Transfer History</h2>
<p>Query transfer history records. Filter query and pagination are supported.</p>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"/api/v1/accounts/6d92e7b4-715c-4ce3-a028-19f1c8c9fa6c/transfers"</span>
</code></pre></div>
<blockquote>
<p>Response Sample:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"pagination_response"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"cursor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-1"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"transfers"</span><span class="p">:[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"transfer_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4c416854-8970-4838-99ad-febc437ac81d"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1000.365"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEBIT"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"conversion_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d81adf6d-0322-41d7-8c32-669203e35f11"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"external_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"adb8f31d-7a71-4003-85d7-3ac58158461f"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1633445162</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"transfer_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4c416854-8971-4838-99ad-febc437ac81d"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.365"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CREDIT"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"conversion_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d81adf6d-0322-41d7-8c32-669203e35f11"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"external_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"adb8f31d-7a71-4003-85d7-3ac58158461f"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1633445160</span><span class="w">
    </span><span class="p">},</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='http-request-5'>HTTP Request</h3>
<p><code>GET /api/v1/accounts/&lt;account_id&gt;/transfers</code></p>
<h3 id='url-parameters-5'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>account_id</td>
<td>true</td>
<td>--</td>
<td>Cabital Connect Account Id</td>
</tr>
<tr>
<td>direction</td>
<td>false</td>
<td>2 Ways</td>
<td>Filter by direction <code>CREDIT</code> / <code>DEBIT</code></td>
</tr>
<tr>
<td>symbol</td>
<td>false</td>
<td>all currencies</td>
<td>Filter for currencies</td>
</tr>
<tr>
<td>cursor</td>
<td>false</td>
<td>&quot;-1&quot;</td>
<td>Result set cursor</td>
</tr>
<tr>
<td>page_size</td>
<td>false</td>
<td>10</td>
<td>Page size（1-30）</td>
</tr>
<tr>
<td>has_conversion</td>
<td>false</td>
<td>both</td>
<td>Bool type (filter whether there are related conversion orders)</td>
</tr>
<tr>
<td>created_from</td>
<td>false</td>
<td>0</td>
<td>Create order start time (Unix Time Epoch in seconds)</td>
</tr>
<tr>
<td>created_to</td>
<td>false</td>
<td>NOW</td>
<td>Create order end time (Unix Time Epoch in seconds)</td>
</tr>
</tbody></table>
<h3 id='response-object'>Response Object</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transfer_id</td>
<td>string(uuid)</td>
<td>Transfer order id</td>
</tr>
<tr>
<td>instructed_amount</td>
<td>string(number)</td>
<td>Instructed Amount</td>
</tr>
<tr>
<td>customer_fee</td>
<td>string(number)</td>
<td>Fee charged to customer</td>
</tr>
<tr>
<td>actual_amount</td>
<td>string(number)</td>
<td>Customer actually received</td>
</tr>
<tr>
<td>symbol</td>
<td>string</td>
<td>Currency symbol</td>
</tr>
<tr>
<td>direction</td>
<td>string(enum)</td>
<td>The direction of the transfer to Cabital. <code>CREDIT</code> for top up into the Cabital Account. <code>DEBIT</code> for withdraw out of the Cabital Account.</td>
</tr>
<tr>
<td>conversion_id</td>
<td>string(uuid)</td>
<td>The conversion order ID in C+T related transactions, optional</td>
</tr>
<tr>
<td>external_id</td>
<td>string(50)</td>
<td>The third-party ID of the partner, optional, but have to be unique to individual transfer.</td>
</tr>
<tr>
<td>status</td>
<td>string(enum)</td>
<td>The result of the transfer (<code>SUCCESS</code> / <code>FAILED</code> / <code>PROCESSING</code>)</td>
</tr>
<tr>
<td>created_at</td>
<td>timestamp(number)</td>
<td>Created timestamp</td>
</tr>
</tbody></table>

<aside class="warning">
<b>Notes：</b>
<ul>
  <li><i>SUCCESS</i> & <i>FAILED</i> are final status，<i>PROCESSING</i> is transit status.</li>
  <li>Transfer won't stale in <i>PROCESSING</i> for quite some time, please reach out to Cabital to investigate the transfer with the transfer id and external id.</li>
</ul>
</aside>
<h2 id='account-transfer-details'>Account Transfer Details</h2>
<p>Fetch the transfer details by transaction id.</p>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"/api/v1/accounts/6d92e7b4-715c-4ce3-a028-19f1c8c9fa6c/transfers/4c416854-8970-4838-99ad-febc437ac81d"</span>
</code></pre></div>
<blockquote>
<p>Response Sample:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"transfer_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4c416854-8970-4838-99ad-febc437ac81d"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"instructed_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1002.865"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"customer_fee"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.5"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"actual_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1000.365"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEBIT"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"conversion_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d81adf6d-0322-41d7-8c32-669203e35f11"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"external_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"adb8f31d-7a71-4003-85d7-3ac58158461f"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1633445162</span><span class="p">,</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUCCESS"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='http-request-6'>HTTP Request</h3>
<p><code>GET /api/v1/accounts/&lt;account_id&gt;/transfers/&lt;trasfer_id&gt;</code></p>
<h3 id='url-parameters-6'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>account_id</td>
<td>true</td>
<td>Cabital Connect Account Id</td>
</tr>
<tr>
<td>trasfer_id</td>
<td>true</td>
<td>Transfer order id</td>
</tr>
</tbody></table>
<h3 id='response-object-2'>Response Object</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transfer_id</td>
<td>string(uuid)</td>
<td>Transfer order id</td>
</tr>
<tr>
<td>instructed_amount</td>
<td>string(number)</td>
<td>Instructed Amount</td>
</tr>
<tr>
<td>customer_fee</td>
<td>string(number)</td>
<td>Fee charged to customer</td>
</tr>
<tr>
<td>actual_amount</td>
<td>string(number)</td>
<td>Customer actually received</td>
</tr>
<tr>
<td>symbol</td>
<td>string</td>
<td>Currency symbol</td>
</tr>
<tr>
<td>direction</td>
<td>string(enum)</td>
<td>The direction of the transfer to Cabital. <code>CREDIT</code> for top up into the Cabital Account. <code>DEBIT</code> for withdraw out of the Cabital Account.</td>
</tr>
<tr>
<td>conversion_id</td>
<td>string(uuid)</td>
<td>The conversion order ID in C+T related transactions, optional</td>
</tr>
<tr>
<td>external_id</td>
<td>string(50)</td>
<td>The third-party ID of the partner, optional, but have to be unique to individual transfer.</td>
</tr>
<tr>
<td>status</td>
<td>string(enum)</td>
<td>The result of the transfer (<code>SUCCESS</code> / <code>FAILED</code> / <code>PROCESSING</code>)</td>
</tr>
<tr>
<td>created_at</td>
<td>timestamp(number)</td>
<td>Created timestamp</td>
</tr>
</tbody></table>
<h2 id='two-way-account-transfer'>Two-way Account Transfer</h2>
<p>Transfer between Cabital and the partner’s account under the same name.</p>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="s2">"/api/v1/accounts/6d92e7b4-715c-4ce3-a028-19f1c8c9fa6c/transfers"</span>
<span class="nt">-d</span> <span class="s1">'{
    "amount": "1002.865",
    "symbol": "USDT",
    "direction": "debit",
    "conversion_id": "d81adf6d-0322-41d7-8c32-669203e35f11",
    "external_id": "adb8f31d-7a71-4003-85d7-3ac58158461f"
}'</span>
</code></pre></div>
<blockquote>
<p>Request Sample:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1002.865"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"debit"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"conversion_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d81adf6d-0322-41d7-8c32-669203e35f11"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"external_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"adb8f31d-7a71-4003-85d7-3ac58158461f"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Response Sample:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"transfer_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4c416854-8970-4838-99ad-febc437ac81d"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUCCESS"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"instructed_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.010001"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"customer_fee"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.01"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"actual_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.000001"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"external_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bbda2651-0ae3-447f-acaf-c23b5449bfb5"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"instruction_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3a344f80-f057-4841-b186-7a1daa0b8390"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='http-request-7'>HTTP Request</h3>
<p><code>POST /api/v1/accounts/&lt;account_id&gt;/transfers</code></p>
<h3 id='url-parameters-7'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>account_id</td>
<td>true</td>
<td>Cabital Connect Account Id</td>
</tr>
</tbody></table>
<h3 id='request-object-2'>Request Object</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>amount</td>
<td>string(number)</td>
<td>Amount</td>
</tr>
<tr>
<td>symbol</td>
<td>string</td>
<td>Currency symbol</td>
</tr>
<tr>
<td>otp</td>
<td>string</td>
<td>OTP Number (6 digits from Google Authenticator / Authy)</td>
</tr>
<tr>
<td>direction</td>
<td>string(enum)</td>
<td>The direction of the transfer to Cabital. <code>CREDIT</code> for top up into the Cabital Account. <code>DEBIT</code> for withdraw out of the Cabital Account.</td>
</tr>
<tr>
<td>conversion_id</td>
<td>string(uuid)</td>
<td>The conversion order ID in C+T related transactions, optional</td>
</tr>
<tr>
<td>external_id</td>
<td>string(50)</td>
<td>The third-party ID of the partner, must be unique for one partner</td>
</tr>
</tbody></table>
<h3 id='response-object-3'>Response Object</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transfer_id</td>
<td>string(uuid)</td>
<td>Transfer order id</td>
</tr>
<tr>
<td>instructed_amount</td>
<td>string(number)</td>
<td>Instructed Amount</td>
</tr>
<tr>
<td>customer_fee</td>
<td>string(number)</td>
<td>Fee charged to customer</td>
</tr>
<tr>
<td>actual_amount</td>
<td>string(number)</td>
<td>Customer actually received</td>
</tr>
<tr>
<td>symbol</td>
<td>string</td>
<td>Currency symbol</td>
</tr>
<tr>
<td>direction</td>
<td>string(enum)</td>
<td>The direction of the transfer to Cabital. <code>CREDIT</code> for top up into the Cabital Account. <code>DEBIT</code> for withdraw out of the Cabital Account.</td>
</tr>
<tr>
<td>conversion_id</td>
<td>string(uuid)</td>
<td>The conversion order ID in C+T related transactions, optional</td>
</tr>
<tr>
<td>external_id</td>
<td>string(50)</td>
<td>The third-party ID of the partner, optional, but have to be unique to individual transfer.</td>
</tr>
<tr>
<td>status</td>
<td>string(enum)</td>
<td>The result of the transfer (<code>SUCCESS</code> / <code>FAILED</code> / <code>PROCESSING</code>)</td>
</tr>
<tr>
<td>created_at</td>
<td>timestamp(number)</td>
<td>Created timestamp</td>
</tr>
</tbody></table>
<h1 id='callback-event'>Callback Event</h1>
<p>Callback events are expected to arrive within 1-5 minutes on average, but in theory it may take up to 24 hours. If you miss the Callback event for some reason, don’t worry. We will resend the failed Callback event. If the Callback event request fails, we will try to resend it four times: after 5 minutes, 1 hour, 5 hours, and 18 hours, until the request succeeds and obtains a 2XX return code.</p>

<p>We recommend that you wait no more than a day for the Callback event, and then send a request to our server to obtain status information about the resource.</p>
<h2 id='account-connect-status-event'>Account Connect Status Event</h2>
<p>When the user initiates a connection from the counterparty, the system will send an account association status event based on the current connection status, which includes the following states:</p>

<table><thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>INITIALIZED</td>
<td>The user has successfully registered and has not yet submitted KYC in Cabital</td>
</tr>
<tr>
<td>PENDING</td>
<td>The user has submitted KYC in Cabital &amp; Cabital is processing the user identification documents</td>
</tr>
<tr>
<td>TEMPORARY_REJECTED</td>
<td>The user has submitted KYC in Cabital &amp; Cabital has requested the user to provide more materials</td>
</tr>
<tr>
<td>FINAL_REJECTED</td>
<td>The user has submitted KYC in Cabital &amp; Cabital has rejected the user</td>
</tr>
<tr>
<td>CREATED</td>
<td>The user has passed Cabital&#39;s KYC. The Cabital account has been opened &amp; is waiting for the partner to submit the same name verification.</td>
</tr>
<tr>
<td>MATCHED</td>
<td>The user has passed Cabital&#39;s KYC and same name verification has passed successfully. The same account transfer is now fully available.</td>
</tr>
<tr>
<td>LINKED</td>
<td>For Account Link Only</td>
</tr>
<tr>
<td>MISMATCHED</td>
<td>The user has passed Cabital&#39;s KYC but the same name verification was rejected. This could happen for multiple reasons.</td>
</tr>
<tr>
<td>UNLINKED</td>
<td>The user / Cabital actively closes the connection with an account of the partner</td>
</tr>
</tbody></table>

<!-- READYFORMATCHING | 我方KYC通过，等待合作方提交同名验证 (以后）-->

<p>When the status of the account connection changes, we will send you a POST request with a JSON payload to the URL provided to us during integration.</p>
<h3 id='json-payload'>JSON Payload</h3>
<blockquote>
<p>JSON Payload</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"account_uuid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6d92e7b4-715c-4ce3-a028-19f1c8c9fa6c"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"user_ext_ref"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fce4fd45-7dd7-4d4c-b06c-e17ff12f3e30"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"staus"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INITIALIZED"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"event_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-07-01T09:00:00.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"data"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>account_uuid</td>
<td>string</td>
<td>true</td>
<td>This party&#39;s account Id</td>
</tr>
<tr>
<td>user_ext_ref</td>
<td>string</td>
<td>true</td>
<td>External Id entered by the partner</td>
</tr>
<tr>
<td>staus</td>
<td>string(enum)</td>
<td>true</td>
<td>status of account association</td>
</tr>
<tr>
<td>event_time</td>
<td>datestamp</td>
<td>true</td>
<td>The time when the event occurred, in the format <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601</a></td>
</tr>
<tr>
<td>data</td>
<td>object</td>
<td>false</td>
<td>Some additional data associated with the account, such as Shared Token, Mis-matched fields.</td>
</tr>
</tbody></table>

<p><strong>User unlink and reconnect status change</strong></p>

<table><thead>
<tr>
<th>Status</th>
<th>Event Flow</th>
<th>Remark</th>
</tr>
</thead><tbody>
<tr>
<td>INITIALIZED</td>
<td>UNLINKED =&gt;INITIALIZED</td>
<td></td>
</tr>
<tr>
<td>PENDING</td>
<td>UNLINKED =&gt;INITIALIZED=&gt; PENDING</td>
<td></td>
</tr>
<tr>
<td>TEMPORARY_REJECTED</td>
<td>UNLINKED =&gt;INITIALIZED=&gt; TEMPORARY_REJECTED</td>
<td></td>
</tr>
<tr>
<td>FINAL_REJECTED</td>
<td>UNLINKED =&gt;INITIALIZED=&gt; FINAL_REJECTED</td>
<td></td>
</tr>
<tr>
<td>CREATED</td>
<td>UNLINKED =&gt;INITIALIZED=&gt; CREATED</td>
<td></td>
</tr>
<tr>
<td>MATCHED</td>
<td>UNLINKED =&gt;INITIALIZED=&gt; CREATED</td>
<td>need to match</td>
</tr>
<tr>
<td>MISMATCHED</td>
<td>UNLINKED =&gt;INITIALIZED=&gt; CREATED</td>
<td>need to match</td>
</tr>
</tbody></table>

<!-- ## Transfer事件

当对手方发起划转后，系统会根据现在的划转状态发送 Transfer事件 事件，其包含以下几个状态：

- SUCCESS
- FAILED

<aside class="notice">
通常不需要监听 Transfer 事件，因为Transfer结果是同期返回给对手方的。
</aside>
### 事件内容 JSON Payload

> JSON Payload

```json
{
    "transfer_id": "4c416854-8970-4838-99ad-febc437ac81d",
    "amount": "1000.365",
    "symbol": "USDT",
    "direction": "DEBIT",
    "conversion_id": "d81adf6d-0322-41d7-8c32-669203e35f11",
    "external_id": "adb8f31d-7a71-4003-85d7-3ac58158461f",
    "created_at": 1633445162,
    "status": "SUCCESS"
}
```

Field | Type | Description
--------- | ------- | -----------
transfer_id | string(uuid) | 划转订单ID
amount | string(number) | 数量
symbol | string | 划转的货币
direction | string(enum) | 划转的方向，以Cabital为中心，`CREDIT`为充值，`DEBIT`为提款
conversion_id | string(uuid) | C+T关联交易中的转换订单ID，非必须
external_id | string(50) | 合作方的第三方ID，非必需
status | string(enum) | 划转的结果，SUCCESS / FAILED -->
<h2 id='event-signature'>Event signature</h2>
<p>Webhook signature rules are consistent with API authentication, please refer to <a href="#api">API authentication</a></p>
<h1 id='error-handling-code'>Error Handling Code</h1>
<p>System error handling</p>

<table><thead>
<tr>
<th>Error code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request - There is an error in parameters</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized - API Secret error or Request signature error</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden - Usually the customer has canceled the association with the partner&#39;s account, and the partner needs to initiate a re-association. (Unlink status)</td>
</tr>
<tr>
<td>404</td>
<td>Not Found - The specific resource does not exist</td>
</tr>
<tr>
<td>405</td>
<td>Method Not Allowed - The method of access is incorrect</td>
</tr>
<tr>
<td>406</td>
<td>Not Acceptable - The format you sent incorrect. The mandatory format is JSON; no other formats are accepted.</td>
</tr>
<tr>
<td>409</td>
<td>Conflict - The message violates idempotence (NONCE)</td>
</tr>
<tr>
<td>429</td>
<td>Too Many Requests - Too many requests</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error - A server error occurred on this party, please try again.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable - Our service is unavailable, please try again later.</td>
</tr>
</tbody></table>
<h1 id='version-changes'>Version changes</h1><h2 id='0-2-5'>0.2.5</h2>
<ul>
<li>Remove IBAN from <code>GBP</code> deposit information</li>
</ul>
<h2 id='0-2-4'>0.2.4</h2>
<ul>
<li>Update error code and error information</li>
</ul>
<h2 id='0-2-3'>0.2.3</h2>
<ul>
<li>Modified partner configuration to pass the transaction fee.</li>
<li>Append currency table and decimal precision standard.</li>
<li>Add country code in <code>matching</code></li>
<li>Add <code>GBP</code> deposit information</li>
<li>Modified <code>transfers</code></li>
<li>Modified <code>quote</code></li>
<li>Webhook event: Removed <code>MATCHING</code> status</li>
</ul>
<h2 id='0-2-2'>0.2.2</h2>
<ul>
<li>Modified the conversions transaction configuration information for the configuration interface of the get partner</li>
<li>Added the transaction cost configuration information of the interface that obtains the configuration of the partner</li>
</ul>
<h2 id='0-2-1'>0.2.1</h2>
<ul>
<li>Modified the conversions transaction configuration information of the Partner-Configuration interface</li>
<li>Fixed URL and API inconsistencies problem</li>
</ul>
<h2 id='0-2-0'>0.2.0</h2>
<ul>
<li>Standardized the product name, changed from <code>partner</code> to <code>cabital connect</code></li>
<li>Added partner preparation documents to prepare for the partner&#39;s access to its own system</li>
<li>Minor adjustments in the naming of the Connect status, which refines the two different properties of <code>Rejected</code></li>
<li>Added error handling of the account, adjusted the status, and converted it to config</li>
</ul>
<h2 id='0-1-1'>0.1.1</h2>
<ul>
<li>API-Key has been restored to speed up the integration of Connect for partners who have integrated CaaS</li>
<li>Due to the use of API-Key, remove the Partner Id in the access Path</li>
<li>Add more API details and error handling</li>
</ul>
<h2 id='0-1-0'>0.1.0</h2>
<ul>
<li>Provide the original Partner API documentation</li>
</ul>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">shell</a>
          </div>
      </div>
    </div>
  </body>
</html>
